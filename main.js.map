{"version":3,"sources":["node_modules/browser-pack/_prelude.js","main.js","assets/javascript/main.js","assets/javascript/analytics.js","assets/javascript/supports.js","node_modules/autotrack/lib/constants.js","node_modules/autotrack/lib/plugins/clean-url-tracker.js","node_modules/autotrack/lib/plugins/event-tracker.js","node_modules/autotrack/lib/plugins/media-query-tracker.js","node_modules/autotrack/lib/plugins/outbound-link-tracker.js","node_modules/autotrack/lib/plugins/page-visibility-tracker.js","node_modules/autotrack/lib/plugins/social-widget-tracker.js","node_modules/autotrack/lib/provide.js","node_modules/autotrack/lib/session.js","node_modules/autotrack/lib/storage.js","node_modules/autotrack/lib/usage.js","node_modules/autotrack/lib/utilities.js","node_modules/autotrack/node_modules/object-assign/index.js","node_modules/debounce/index.js","node_modules/debounce/node_modules/date-now/index.js","node_modules/dom-utils/lib/closest.js","node_modules/dom-utils/lib/delegate.js","node_modules/dom-utils/lib/get-attributes.js","node_modules/dom-utils/lib/matches.js","node_modules/dom-utils/lib/parents.js","node_modules/dom-utils/lib/parse-url.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","main","err","supports","flexbox","div","document","createElement","className","innerHTML","body","insertBefore","firstChild","window","onload","analytics","init","trackPageload","trackError","_interopRequire","obj","__esModule","_interopRequireWildcard","default","./analytics","./supports","2","createTrackers","trackErrors","trackCustomDimensions","requireAutotrackPlugins","sendInitialPageview","gaAll","stack","toString","nonInteraction","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","ALL_TRACKERS","Symbol","iterator","next","done","tracker","value","ga","trackingId","name","siteSpeedSampleRate","errorQueue","onerror","q","msg","file","line","col","error","eventCategory","eventAction","eventLabel","apply","_toConsumableArray","Object","keys","dimensions","forEach","key","NULL_VALUE","gaTest","set","_tracker$set","_defineProperty","TRACKING_VERSION","CLIENT_ID","get","WINDOW_ID","uuid","originalBuildHitTask","model","path","parseUrl","PAGE_PATH","HIT_TYPE","HIT_TIME","String","Date","HIT_ID","VISIBILITY_STATE","visibilityState","stripQuery","queryDimensionIndex","getDefinitionIndex","URL_QUERY_PARAMS","indexFilename","trailingSlash","definitions","dimensionIndex","items","media","visibleMetricIndex","metrics","PAGE_VISIBLE","hiddenMetricIndex","PAGE_HIDDEN","heartbeatTimeout","sessionTimeout","timeZone","fieldsObj","HIT_SOURCE","hitFilter","METRIC_VALUE","createGaProxy","trackers","command","_len","arguments","args","Array","_key","getByName","concat","definition","exec","shuffleArray","array","j","Math","floor","random","temp","arr","isArray","arr2","from","defineProperty","enumerable","configurable","writable","TEST_TRACKERS","filter","_ref","test","BREAKPOINT","RESOLUTION","ORIENTATION","b","replace","autotrack/lib/plugins/clean-url-tracker","autotrack/lib/plugins/event-tracker","autotrack/lib/plugins/media-query-tracker","autotrack/lib/plugins/outbound-link-tracker","autotrack/lib/plugins/page-visibility-tracker","autotrack/lib/plugins/social-widget-tracker","dom-utils/lib/parse-url","3","style","4","VERSION","DEV_ID","VERSION_PARAM","USAGE_PARAM","NULL_DIMENSION","5","CleanUrlTracker","opts","usage","track","plugins","CLEAN_URL_TRACKER","this","assign","overrideTrackerBuildHitTask","constants","provide","prototype","cleanUrlTask","location","page","url","oldPath","pathname","newPath","parts","split","join","isFilename","substr","query","search","originalTrackerBuildHitTask","bind","remove","../constants","../provide","../usage","object-assign","6","EventTracker","EVENT_TRACKER","addEventListener","events","attributePrefix","handleEvents","selector","delegates","event","delegate","composed","useCapture","createFieldsObj","getAttributeFields","element","prefix","type","getAttribute","defaultFields","transport","attributeFields","userFields","hitType","send","destroy","../utilities","dom-utils/lib/delegate","7","MediaQueryTracker","MEDIA_QUERY_TRACKER","matchMedia","changeTemplate","changeTimeout","isObject","toArray","changeListeners","processMediaQueries","getMediaListener","mediaMap","debounce","mediaName","getMatchName","addChangeListeners","match","item","matches","mql","fn","handleChanges","addListener","push","newValue","oldValue","listener","removeListener","8","OutboundLinkTracker","OUTBOUND_LINK_TRACKER","linkSelector","shouldTrackOutboundLink","handleLinkInteractions","linkClickWillUnloadCurrentPage","link","target","metaKey","ctrlKey","shiftKey","altKey","which","withTimeout","href","navigator","sendBeacon","defaultPrevented","preventDefault","hitCallback","hostname","protocol","slice","9","PageVisibilityTracker","PAGE_VISIBILITY_TRACKER","Session","DEFAULT_TIMEOUT","isInitialPageviewSent","isInitialVisibilityChangeSent","handleVisibilityChange","handleWindowUnload","handleStorageChange","newSessionDidStart","initialScreenOrPageviewDidSend","store","Store","storageDidChangeInAnotherWindow","session","now","HIDDEN","VISIBLE","PAGE_ID","SECONDS","MINUTES","time","getPage","pageId","scheduleNextHeartbeat","getVisibilityState","clearTimeout","isExpired","clear","isLastTrackerInteractionFromPreviousSession","sendPageVisibilityEvent","state","action","lastVisibilityChange","timeSinceLastVisibilityChange","getTimeSinceLastVisibilityChange","formatChange","eventValue","metric","lastVisibilityState","lastVisibilityChangeTime","isSessionActive","timeSinceChange","round","setTimeout","locationUrl","hash","oldTrackerSendMethod","restore","removeEventListener","../session","../storage","10","SocialWidgetTracker","SOCIAL_WIDGET_TRACKER","addWidgetListeners","addTwitterEventHandlers","handleTweetEvents","handleFollowEvents","handleLikeEvents","handleUnlikeEvents","readyState","FB","addFacebookEventHandlers","twttr","ready","removeTwitterEventHandlers","unbind","Event","subscribe","removeFacebookEventHandlers","unsubscribe","region","data","socialNetwork","socialAction","socialTarget","screenName","screen_name","11","utilities","gaDevIds","pluginName","pluginConstructor","gaAlias","gaplugins","capitalize","./constants","./utilities","12","timeout","instances","isInitialScreenOrPageviewSent_","isTrackerActiveInSession_","sessionCount_","sendHitTask","handleStorage","oldSendHitTask","hitTime","sessionCount","getDateInTimezone","date","Intl","DateTimeFormat","format","sessionData","currentData","oldHitTime","oldHitDate","globalSessionCount","trackerSessionCount","hasBeenActiveEver","hasSentInteractionHit","isInteractionHit","isSessionExpired","newData","oldData","newSessionDidStartInAnotherWindow","./storage","13","initStorageListener","storageListener","isListening","removeStorageListener","stores","parse","defaults","source","JSON","namespace","AUTOTRACK_PREFIX","localStorage","getItem","mergedData","setItem","stringify","removeItem","14","convertHexToBin","hex","parseInt","convertBinToHex","bin","padZeros","str","len","toAdd","flipBitOn","index","trackPlugin","pluginIndex","usageHex","usageBin","PLUGIN_COUNT","trackVersion","IMPRESSION_TRACKER","OUTBOUND_FORM_TRACKER","URL_CHANGE_TRACKER","plugin","15","getAttributes","opt_tracker","opt_hitFilter","opt_target","buildHitTask","attributes","attribute","indexOf","field","camelCase","domReady","callback","wait","called","p1","toUpperCase","charAt","dom-utils/lib/get-attributes","16","toObject","val","TypeError","shouldUseNative","test1","getOwnPropertyNames","test2","fromCharCode","order2","map","test3","letter","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","symbols","to","getOwnPropertySymbols","17","func","immediate","later","last","timestamp","result","context","callNow","date-now","18","getTime","19","parents","shouldCheckSelf","nodeType","parent","parentElements","./matches","./parents","20","closest","ancestor","eventType","composedPath","node","delegateTarget","./closest","21","attrs","attr","22","matchesSelector","nativeMatches","nodes","parentNode","querySelectorAll","proto","Element","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","23","list","24","HTTP_PORT","HTTPS_PORT","DEFAULT_PORT","RegExp","cache","port","host","origin","fragment"],"mappings":"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","file":"main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\nvar _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; };\n\nvar analytics = _interopRequireWildcard(require(\"./analytics\"));\n\nvar supports = _interopRequire(require(\"./supports\"));\n\n/**\n * The main script entry point for the site. Initalizes all the sub modules\n * analytics tracking, and the service worker.\n * @param {?Error} err Present if an error occurred loading the polyfills.\n */\nfunction main(err) {\n  // Add an `is-legacy` class on browsers that don't supports flexbox.\n  if (!supports.flexbox()) {\n    var div = document.createElement(\"div\");\n    div.className = \"Error\";\n    div.innerHTML = \"Your browser does not support Flexbox.\\n                     Parts of this site may not appear as expected.\";\n\n    document.body.insertBefore(div, document.body.firstChild);\n  }\n\n  // Delays running any analytics or registering the service worker\n  // to ensure the don't compete for load resources.\n  window.onload = function () {\n    analytics.init();\n    analytics.trackPageload();\n    if (err) {\n      analytics.trackError(err);\n    }\n  };\n}\n\nmain();\n\n},{\"./analytics\":2,\"./supports\":3}],2:[function(require,module,exports){\n\"use strict\";\n\nvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\nvar _slicedToArray = function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { var _arr = []; for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) { _arr.push(_step.value); if (i && _arr.length === i) break; } return _arr; } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } };\n\nvar _toConsumableArray = function (arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } };\n\nvar _defineProperty = function (obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); };\n\n/**\n * Initializes all the analytics setup. Creates trackers and sets initial\n * values on the trackers.\n */\nexports.init = init;\n\n/**\n * Tracks the initial pageload and performance timing data associated with it.\n */\nexports.trackPageload = trackPageload;\n\n/**\n * Tracks a JavaScript error.\n * @param {Error} err The error object to track.\n */\nexports.trackError = trackError;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire(\"autotrack/lib/plugins/clean-url-tracker\");\n\nrequire(\"autotrack/lib/plugins/event-tracker\");\n\nrequire(\"autotrack/lib/plugins/media-query-tracker\");\n\nrequire(\"autotrack/lib/plugins/outbound-link-tracker\");\n\nrequire(\"autotrack/lib/plugins/page-visibility-tracker\");\n\nrequire(\"autotrack/lib/plugins/social-widget-tracker\");\n\nvar parseUrl = _interopRequire(require(\"dom-utils/lib/parse-url\"));\n\n/**\n * Bump this when making backwards incompatible changes to the tracking\n * implementation. This allows you to create a segment or view filter\n * that isolates only data captured with the most recent tracking changes.\n */\nvar TRACKING_VERSION = \"1\";\n\n/**\n * A global list of tracker object, randomized to ensure no one tracker\n * data is always sent first.\n */\nvar ALL_TRACKERS = shuffleArray([{ name: \"t0\", trackingId: \"UA-40829935-1\" }, { name: \"testing\", trackingId: \"UA-40829935-4\" }]);\n\nvar TEST_TRACKERS = ALL_TRACKERS.filter(function (_ref) {\n  var name = _ref.name;\n  return /test/.test(name);\n});\nvar NULL_VALUE = \"(not set)\";\n\nvar metrics = {\n  PAGE_VISIBLE: \"metric1\",\n  PAGE_HIDDEN: \"metric2\" };\n\nvar dimensions = {\n  BREAKPOINT: \"dimension1\",\n  RESOLUTION: \"dimension2\",\n  ORIENTATION: \"dimension3\",\n  HIT_SOURCE: \"dimension4\",\n  URL_QUERY_PARAMS: \"dimension5\",\n  METRIC_VALUE: \"dimension6\",\n  CLIENT_ID: \"dimension7\",\n  HIT_TYPE: \"dimension8\",\n  HIT_TIME: \"dimension9\",\n  HIT_ID: \"dimension10\",\n  WINDOW_ID: \"dimension11\",\n  VISIBILITY_STATE: \"dimension12\",\n  TRACKING_VERSION: \"dimension13\",\n  PAGE_PATH: \"dimension14\"\n};\n\n// The command queue proxies.\nvar gaAll = createGaProxy(ALL_TRACKERS);\nvar gaTest = createGaProxy(TEST_TRACKERS);\nfunction init() {\n  createTrackers();\n  trackErrors();\n\n  trackCustomDimensions();\n  requireAutotrackPlugins();\n}\n\nfunction trackPageload() {\n  sendInitialPageview();\n}\n\nfunction trackError(err) {\n  gaAll(\"send\", \"event\", \"Script\", \"error\", err.stack || err.toString(), {\n    nonInteraction: true });\n}\n\n/**\n * Creates the trackers and sets the default transport and tracking\n * version fields. In non-production environments it also logs hits.\n */\nfunction createTrackers() {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = ALL_TRACKERS[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var tracker = _step.value;\n\n      window.ga(\"create\", tracker.trackingId, \"auto\", tracker.name, {\n        siteSpeedSampleRate: 10\n      });\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"]) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  // Ensures all hits are sent via `navigator.sendBeacon()`.\n  // Note: this cannot via the `create` command.\n  gaAll(\"set\", \"transport\", \"beacon\");\n\n  // Log hits in non-production environments.\n  if (\"production\" != \"production\") {\n    gaAll(\"set\", \"sendHitTask\", function (model) {\n      var _window$console;\n\n      var paramsToIgnore = [\"v\", \"did\", \"t\", \"tid\", \"ec\", \"ea\", \"el\", \"ev\", \"a\", \"z\", \"ul\", \"de\", \"sd\", \"sr\", \"vp\", \"je\", \"fl\", \"jid\"];\n\n      var hitType = model.get(\"&t\");\n      var hitPayload = model.get(\"hitPayload\");\n      var hit = hitPayload.split(\"&\").map(decodeURIComponent).filter(function (item) {\n        var _item$split = item.split(\"=\");\n\n        var _item$split2 = _slicedToArray(_item$split, 1);\n\n        var param = _item$split2[0];\n\n        return !(param.charAt(0) === \"_\" || paramsToIgnore.indexOf(param) > -1);\n      });\n\n      var parts = [model.get(\"&tid\"), hitType];\n      if (hitType == \"event\") {\n        parts = [].concat(_toConsumableArray(parts), [model.get(\"&ec\"), model.get(\"&ea\"), model.get(\"&el\")]);\n        if (model.get(\"&ev\")) parts.push(model.get(\"&ev\"));\n      }\n\n      (_window$console = window.console).log.apply(_window$console, _toConsumableArray(parts).concat([hit]));\n    });\n  }\n}\n\n/**\n * Tracks any errors that may have occured on the page prior to analytics being\n * initialized, then adds an event handler to track future errors.\n */\nfunction trackErrors() {\n  // Errors that have occurred prior to this script running are stored on\n  // the `q` property of the window.onerror function.\n  var errorQueue = window.onerror.q || [];\n\n  // Override the temp `onerror()` handler to now send hits to GA.\n  window.onerror = function (msg, file, line, col, error) {\n    gaAll(\"send\", \"event\", {\n      eventCategory: \"Script\",\n      eventAction: \"uncaught error\",\n      eventLabel: error ? error.stack : \"\" + msg + \"\\n\" + file + \":\" + line + \":\" + col,\n      nonInteraction: true });\n  };\n\n  // Replay any stored errors in the queue.\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = errorQueue[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var error = _step.value;\n\n      window.onerror.apply(window, _toConsumableArray(error));\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"]) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\n/**\n * Sets a default dimension value for all custom dimensions on all trackers.\n */\nfunction trackCustomDimensions() {\n  // Sets a default dimension value for all custom dimensions on all trackers.\n  // This obviously must be done before setting any other custom dimensions.\n  Object.keys(dimensions).forEach(function (key) {\n    gaAll(\"set\", dimensions[key], NULL_VALUE);\n  });\n\n  // Adds tracking of dimensions known at page load time.\n  gaTest(function (tracker) {\n    tracker.set((function () {\n      var _tracker$set = {};\n\n      _defineProperty(_tracker$set, dimensions.TRACKING_VERSION, TRACKING_VERSION);\n\n      _defineProperty(_tracker$set, dimensions.CLIENT_ID, tracker.get(\"clientId\"));\n\n      _defineProperty(_tracker$set, dimensions.WINDOW_ID, uuid());\n\n      return _tracker$set;\n    })());\n  });\n\n  // Adds tracking to record each the type, time, uuid, and visibility state\n  // of each hit immediately before it's sent.\n  gaTest(function (tracker) {\n    var originalBuildHitTask = tracker.get(\"buildHitTask\");\n    tracker.set(\"buildHitTask\", function (model) {\n      var path = model.get(\"page\") || parseUrl(model.get(\"location\")).path;\n      model.set(dimensions.PAGE_PATH, path), model.set(dimensions.HIT_TYPE, model.get(\"hitType\"), true);\n      model.set(dimensions.HIT_TIME, String(+new Date()), true);\n      model.set(dimensions.HIT_ID, uuid(), true);\n      model.set(dimensions.VISIBILITY_STATE, document.visibilityState, true);\n      originalBuildHitTask(model);\n    });\n  });\n}\n\n/**\n * Requires select autotrack plugins for each tracker.\n */\nfunction requireAutotrackPlugins() {\n  gaAll(\"require\", \"cleanUrlTracker\", {\n    stripQuery: true,\n    queryDimensionIndex: getDefinitionIndex(dimensions.URL_QUERY_PARAMS),\n    indexFilename: \"index.html\",\n    trailingSlash: \"add\" });\n  gaAll(\"require\", \"eventTracker\");\n  gaAll(\"require\", \"mediaQueryTracker\", {\n    definitions: [{\n      name: \"Breakpoint\",\n      dimensionIndex: 1,\n      items: [{ name: \"xs\", media: \"all\" }, { name: \"sm\", media: \"(min-width: 384px)\" }, { name: \"md\", media: \"(min-width: 576px)\" }, { name: \"lg\", media: \"(min-width: 768px)\" }]\n    }, {\n      name: \"Resolution\",\n      dimensionIndex: 2,\n      items: [{ name: \"1x\", media: \"all\" }, { name: \"1.5x\", media: \"(-webkit-min-device-pixel-ratio: 1.5), \" + \"(min-resolution: 144dpi)\" }, { name: \"2x\", media: \"(-webkit-min-device-pixel-ratio: 2), \" + \"(min-resolution: 192dpi)\" }]\n    }, {\n      name: \"Orientation\",\n      dimensionIndex: 3,\n      items: [{ name: \"landscape\", media: \"(orientation: landscape)\" }, { name: \"portrait\", media: \"(orientation: portrait)\" }]\n    }]\n  });\n  gaAll(\"require\", \"outboundLinkTracker\");\n  gaTest(\"require\", \"pageVisibilityTracker\", {\n    visibleMetricIndex: getDefinitionIndex(metrics.PAGE_VISIBLE),\n    hiddenMetricIndex: getDefinitionIndex(metrics.PAGE_HIDDEN),\n    heartbeatTimeout: 1,\n    sessionTimeout: 30,\n    timeZone: \"America/Los_Angeles\",\n    fieldsObj: _defineProperty({}, dimensions.HIT_SOURCE, \"pageVisibilityTracker\"),\n    hitFilter: function (model) {\n      model.set(dimensions.METRIC_VALUE, String(model.get(\"eventValue\")), true);\n    } });\n  gaAll(\"require\", \"socialWidgetTracker\");\n}\n\n/**\n * Sends the initial pageview.\n */\nfunction sendInitialPageview() {\n  gaAll(\"send\", \"pageview\", _defineProperty({}, dimensions.HIT_SOURCE, \"pageload\"));\n}\n\n/**\n * Creates a ga() proxy function that calls commands on all but the\n * excluded trackers.\n * @param {Array} trackers an array or objects containing the `name` and\n *     `trackingId` fields.\n * @return {Function} The proxied ga() function.\n */\nfunction createGaProxy(trackers) {\n  return function (command) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = trackers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        (function () {\n          var name = _step.value.name;\n\n          if (typeof command == \"function\") {\n            window.ga(function () {\n              command(window.ga.getByName(name));\n            });\n          } else {\n            window.ga.apply(window, [\"\" + name + \".\" + command].concat(args));\n          }\n        })();\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator[\"return\"]) {\n          _iterator[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  };\n}\n\n/**\n * Accepts a custom dimension or metric and returns it's numerical index.\n * @param {string} definition The definition string (e.g. 'dimension1').\n * @return {number} The definition index.\n */\nfunction getDefinitionIndex(definition) {\n  return +/\\d+$/.exec(definition)[0];\n}\n\n/**\n * Randomizes array element order in-place using Durstenfeld shuffle algorithm.\n * http://goo.gl/91pjZs\n * @param {Array} array The input array.\n * @return {Array} The randomized array.\n */\nfunction shuffleArray(array) {\n  for (var i = array.length - 1; i > 0; i--) {\n    var j = Math.floor(Math.random() * (i + 1));\n    var temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n  return array;\n}\n\n/*eslint-disable */\n// https://gist.github.com/jed/982883\nvar uuid = function b(a) {\n  return a ? (a ^ Math.random() * 16 >> a / 4).toString(16) : ([10000000] + -1000 + -4000 + -8000 + -100000000000).replace(/[018]/g, b);\n};\n/*eslint-enable */\n\n},{\"autotrack/lib/plugins/clean-url-tracker\":5,\"autotrack/lib/plugins/event-tracker\":6,\"autotrack/lib/plugins/media-query-tracker\":7,\"autotrack/lib/plugins/outbound-link-tracker\":8,\"autotrack/lib/plugins/page-visibility-tracker\":9,\"autotrack/lib/plugins/social-widget-tracker\":10,\"dom-utils/lib/parse-url\":24}],3:[function(require,module,exports){\n\"use strict\";\n\nvar supports = {};\nvar style = document.body.style;\n\nmodule.exports = {\n  flexbox: function flexbox() {\n    return supports.flexbox || (supports.flexbox = \"flexBasis\" in style || \"msFlexAlign\" in style || \"webkitBoxDirection\" in style);\n  }\n};\n\n},{}],4:[function(require,module,exports){\n/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nmodule.exports = {\n  VERSION: '1.1.0',\n  DEV_ID: 'i5iSjo',\n\n  VERSION_PARAM: '_av',\n  USAGE_PARAM: '_au',\n\n  NULL_DIMENSION: '(not set)'\n};\n\n},{}],5:[function(require,module,exports){\n/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar assign = require('object-assign');\nvar parseUrl = require('dom-utils/lib/parse-url');\nvar constants = require('../constants');\nvar provide = require('../provide');\nvar usage = require('../usage');\n\n\n/**\n * Registers clean URL tracking on a tracker object. The clean URL tracker\n * removes query parameters from the page value reported to Google Analytics.\n * It also helps to prevent tracking similar URLs, e.g. sometimes ending a URL\n * with a slash and sometimes not.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction CleanUrlTracker(tracker, opts) {\n\n  usage.track(tracker, usage.plugins.CLEAN_URL_TRACKER);\n\n  this.opts = assign({\n    stripQuery: false,\n    queryDimensionIndex: null,\n    indexFilename: null,\n    trailingSlash: null\n  }, opts);\n\n  this.tracker = tracker;\n\n  this.overrideTrackerBuildHitTask();\n}\n\n\n/**\n * Cleans the URL based on the preferences set in the configuration options.\n * @param {Object} model An analytics.js Model object.\n */\nCleanUrlTracker.prototype.cleanUrlTask = function(model) {\n\n  var location = model.get('location');\n  var page = model.get('page');\n  var url = parseUrl(page || location);\n\n  var oldPath = url.pathname;\n  var newPath = oldPath;\n\n  // If an index filename was provided, remove it if it appears at the end\n  // of the URL.\n  if (this.opts.indexFilename) {\n    var parts = newPath.split('/');\n    if (this.opts.indexFilename == parts[parts.length - 1]) {\n      parts[parts.length - 1] = '';\n      newPath = parts.join('/');\n    }\n  }\n\n  // Ensure the URL ends with or doesn't end with slash based on the\n  // `trailingSlash` option. Note that filename URLs should never contain\n  // a trailing slash.\n  if (this.opts.trailingSlash == 'remove') {\n      newPath = newPath.replace(/\\/+$/, '');\n  }\n  else if (this.opts.trailingSlash == 'add') {\n    var isFilename = /\\.\\w+$/.test(newPath);\n    if (!isFilename && newPath.substr(-1) != '/') {\n      newPath = newPath + '/';\n    }\n  }\n\n  // If a query dimensions index was provided, set the query string portion\n  // of the URL on that dimension. If no query string exists on the URL use\n  // the NULL_DIMENSION.\n  if (this.opts.stripQuery && this.opts.queryDimensionIndex) {\n    model.set('dimension' + this.opts.queryDimensionIndex,\n        url.query || constants.NULL_DIMENSION, true);\n  }\n\n  model.set('page', newPath + (!this.opts.stripQuery ? url.search : ''), true);\n};\n\n\n/**\n * Overrides the tracker's `buildHitTask` to check for proper URL formatting\n * on every hit (not just the initial pageview).\n */\nCleanUrlTracker.prototype.overrideTrackerBuildHitTask = function() {\n  this.originalTrackerBuildHitTask = this.tracker.get('buildHitTask');\n\n  this.tracker.set('buildHitTask', function(model) {\n    this.cleanUrlTask(model);\n    this.originalTrackerBuildHitTask(model);\n  }.bind(this));\n};\n\n\n/**\n * Restores all overridden tasks and methods.\n */\nCleanUrlTracker.prototype.remove = function() {\n  this.tracker.set('buildHitTask', this.originalTrackerBuildHitTask);\n};\n\n\nprovide('cleanUrlTracker', CleanUrlTracker);\n\n},{\"../constants\":4,\"../provide\":11,\"../usage\":14,\"dom-utils/lib/parse-url\":24,\"object-assign\":16}],6:[function(require,module,exports){\n/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar assign = require('object-assign');\nvar delegate = require('dom-utils/lib/delegate');\nvar provide = require('../provide');\nvar usage = require('../usage');\nvar createFieldsObj = require('../utilities').createFieldsObj;\nvar getAttributeFields = require('../utilities').getAttributeFields;\n\n\n/**\n * Registers declarative event tracking.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction EventTracker(tracker, opts) {\n\n  usage.track(tracker, usage.plugins.EVENT_TRACKER);\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.addEventListener) return;\n\n  this.opts = assign({\n    events: ['click'],\n    fieldsObj: {},\n    attributePrefix: 'ga-',\n    hitFilter: null\n  }, opts);\n\n  this.tracker = tracker;\n\n  // Binds methods.\n  this.handleEvents = this.handleEvents.bind(this);\n\n  var selector = '[' + this.opts.attributePrefix + 'on]';\n\n  // Creates a mapping of events to their delegates\n  this.delegates = {};\n  this.opts.events.forEach(function(event) {\n    this.delegates[event] = delegate(document, event, selector,\n        this.handleEvents, {composed: true, useCapture: true});\n  }.bind(this));\n}\n\n\n/**\n * Handles all clicks on elements with event attributes.\n * @param {Event} event The DOM click event.\n * @param {Element} element The delegated DOM element target.\n */\nEventTracker.prototype.handleEvents = function(event, element) {\n\n  var prefix = this.opts.attributePrefix;\n\n  // Ensures the event type matches the one specified on the element.\n  if (event.type != element.getAttribute(prefix + 'on')) return;\n\n  var defaultFields = {transport: 'beacon'};\n  var attributeFields = getAttributeFields(element, prefix);\n  var userFields = assign({}, this.opts.fieldsObj, attributeFields);\n  var hitType = attributeFields.hitType || 'event';\n\n  this.tracker.send(hitType, createFieldsObj(\n      defaultFields, userFields, this.tracker, this.opts.hitFilter, element));\n};\n\n\n/**\n * Removes all event listeners and instance properties.\n */\nEventTracker.prototype.remove = function() {\n  Object.keys(this.delegates).forEach(function(key) {\n    this.delegates[key].destroy();\n  }.bind(this));\n};\n\n\nprovide('eventTracker', EventTracker);\n\n},{\"../provide\":11,\"../usage\":14,\"../utilities\":15,\"dom-utils/lib/delegate\":20,\"object-assign\":16}],7:[function(require,module,exports){\n/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar assign = require('object-assign');\nvar debounce = require('debounce');\nvar constants = require('../constants');\nvar provide = require('../provide');\nvar usage = require('../usage');\nvar createFieldsObj = require('../utilities').createFieldsObj;\nvar isObject = require('../utilities').isObject;\nvar toArray = require('../utilities').toArray;\n\n\n/**\n * Declares the MediaQueryListener instance cache.\n */\nvar mediaMap = {};\n\n\n/**\n * Registers media query tracking.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction MediaQueryTracker(tracker, opts) {\n\n  usage.track(tracker, usage.plugins.MEDIA_QUERY_TRACKER);\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.matchMedia) return;\n\n  this.opts = assign({\n    definitions: null,\n    changeTemplate: this.changeTemplate,\n    changeTimeout: 1000,\n    fieldsObj: {},\n    hitFilter: null\n  }, opts);\n\n  // Exits early if media query data doesn't exist.\n  if (!isObject(this.opts.definitions)) return;\n\n  this.opts.definitions = toArray(this.opts.definitions);\n  this.tracker = tracker;\n  this.changeListeners = [];\n\n  this.processMediaQueries();\n}\n\n\n/**\n * Loops through each media query definition, sets the custom dimenion data,\n * and adds the change listeners.\n */\nMediaQueryTracker.prototype.processMediaQueries = function() {\n  this.opts.definitions.forEach(function(definition) {\n    // Only processes definitions with a name and index.\n    if (definition.name && definition.dimensionIndex) {\n      var mediaName = this.getMatchName(definition);\n      this.tracker.set('dimension' + definition.dimensionIndex, mediaName);\n\n      this.addChangeListeners(definition);\n    }\n  }.bind(this));\n};\n\n\n/**\n * Takes a definition object and return the name of the matching media item.\n * If no match is found, the NULL_DIMENSION value is returned.\n * @param {Object} definition A set of named media queries associated\n *     with a single custom dimension.\n * @return {string} The name of the matched media or NULL_DIMENSION.\n */\nMediaQueryTracker.prototype.getMatchName = function(definition) {\n  var match;\n\n  definition.items.forEach(function(item) {\n    if (getMediaListener(item.media).matches) {\n      match = item;\n    }\n  });\n  return match ? match.name : constants.NULL_DIMENSION;\n};\n\n\n/**\n * Adds change listeners to each media query in the definition list.\n * Debounces the changes to prevent unnecessary hits from being sent.\n * @param {Object} definition A set of named media queries associated\n *     with a single custom dimension\n */\nMediaQueryTracker.prototype.addChangeListeners = function(definition) {\n  definition.items.forEach(function(item) {\n    var mql = getMediaListener(item.media);\n    var fn = debounce(function() {\n      this.handleChanges(definition);\n    }.bind(this), this.opts.changeTimeout);\n\n    mql.addListener(fn);\n    this.changeListeners.push({mql: mql, fn: fn});\n  }.bind(this));\n};\n\n\n/**\n * Handles changes to the matched media. When the new value differs from\n * the old value, a change event is sent.\n * @param {Object} definition A set of named media queries associated\n *     with a single custom dimension\n */\nMediaQueryTracker.prototype.handleChanges = function(definition) {\n  var newValue = this.getMatchName(definition);\n  var oldValue = this.tracker.get('dimension' + definition.dimensionIndex);\n\n  if (newValue !== oldValue) {\n    this.tracker.set('dimension' + definition.dimensionIndex, newValue);\n\n    var defaultFields = {\n      eventCategory: definition.name,\n      eventAction: 'change',\n      eventLabel: this.opts.changeTemplate(oldValue, newValue),\n      nonInteraction: true,\n      transport: 'beacon'\n    };\n    this.tracker.send('event', createFieldsObj(\n        defaultFields, this.opts.fieldsObj, this.tracker, this.opts.hitFilter));\n  }\n};\n\n\n/**\n * Removes all event listeners and instance properties.\n */\nMediaQueryTracker.prototype.remove = function() {\n  for (var i = 0, listener; listener = this.changeListeners[i]; i++) {\n    listener.mql.removeListener(listener.fn);\n  }\n};\n\n\n/**\n * Sets the default formatting of the change event label.\n * This can be overridden by setting the `changeTemplate` option.\n * @param {string} oldValue The value of the media query prior to the change.\n * @param {string} newValue The value of the media query after the change.\n * @return {string} The formatted event label.\n */\nMediaQueryTracker.prototype.changeTemplate = function(oldValue, newValue) {\n  return oldValue + ' => ' + newValue;\n};\n\n\n/**\n * Accepts a media query and returns a MediaQueryListener object.\n * Caches the values to avoid multiple unnecessary instances.\n * @param {string} media A media query value.\n * @return {MediaQueryListener} The matched media.\n */\nfunction getMediaListener(media) {\n  // Returns early if the media is cached.\n  if (mediaMap[media]) return mediaMap[media];\n\n  mediaMap[media] = window.matchMedia(media);\n  return mediaMap[media];\n}\n\n\nprovide('mediaQueryTracker', MediaQueryTracker);\n\n},{\"../constants\":4,\"../provide\":11,\"../usage\":14,\"../utilities\":15,\"debounce\":17,\"object-assign\":16}],8:[function(require,module,exports){\n/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar assign = require('object-assign');\nvar delegate = require('dom-utils/lib/delegate');\nvar parseUrl = require('dom-utils/lib/parse-url');\nvar provide = require('../provide');\nvar usage = require('../usage');\nvar createFieldsObj = require('../utilities').createFieldsObj;\nvar getAttributeFields = require('../utilities').getAttributeFields;\nvar withTimeout = require('../utilities').withTimeout;\n\n\n/**\n * Registers outbound link tracking on a tracker object.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction OutboundLinkTracker(tracker, opts) {\n\n  usage.track(tracker, usage.plugins.OUTBOUND_LINK_TRACKER);\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.addEventListener) return;\n\n  this.opts = assign({\n    events: ['click'],\n    linkSelector: 'a, area',\n    shouldTrackOutboundLink: this.shouldTrackOutboundLink,\n    fieldsObj: {},\n    attributePrefix: 'ga-',\n    hitFilter: null\n  }, opts);\n\n  this.tracker = tracker;\n\n  // Binds methods.\n  this.handleLinkInteractions = this.handleLinkInteractions.bind(this);\n\n  // Creates a mapping of events to their delegates\n  this.delegates = {};\n  this.opts.events.forEach(function(event) {\n    this.delegates[event] = delegate(document, event, this.opts.linkSelector,\n        this.handleLinkInteractions, {composed: true, useCapture: true});\n  }.bind(this));\n}\n\n\n/**\n * Handles all interactions on link elements. A link is considered an outbound\n * link if its hostname property does not match location.hostname. When the\n * beacon transport method is not available, the links target is set to\n * \"_blank\" to ensure the hit can be sent.\n * @param {Event} event The DOM click event.\n * @param {Element} link The delegated event target.\n */\nOutboundLinkTracker.prototype.handleLinkInteractions = function(event, link) {\n  if (this.opts.shouldTrackOutboundLink(link, parseUrl)) {\n    var href = link.getAttribute('href') || link.getAttribute('xlink:href');\n    var url = parseUrl(href);\n\n    var defaultFields = {\n      transport: 'beacon',\n      eventCategory: 'Outbound Link',\n      eventAction: event.type,\n      eventLabel: url.href\n    };\n\n    if (!navigator.sendBeacon &&\n        linkClickWillUnloadCurrentPage(event, link)) {\n      // Adds a new event handler at the last minute to minimize the chances\n      // that another event handler for this click will run after this logic.\n      window.addEventListener('click', function(event) {\n        // Checks to make sure another event handler hasn't already prevented\n        // the default action. If it has the custom redirect isn't needed.\n        if (!event.defaultPrevented) {\n          // Stops the click and waits until the hit is complete (with timeout)\n          // for browsers that don't support beacon.\n          event.preventDefault();\n          defaultFields.hitCallback = withTimeout(function() {\n            location.href = href;\n          });\n        }\n      });\n    }\n\n    var userFields = assign({}, this.opts.fieldsObj,\n        getAttributeFields(link, this.opts.attributePrefix));\n\n    this.tracker.send('event', createFieldsObj(\n        defaultFields, userFields, this.tracker, this.opts.hitFilter, link));\n  }\n};\n\n\n/**\n * Determines whether or not the tracker should send a hit when a link is\n * clicked. By default links with a hostname property not equal to the current\n * hostname are tracked.\n * @param {Element} link The link that was clicked on.\n * @param {Function} parseUrl A cross-browser utility method for url parsing.\n * @return {boolean} Whether or not the link should be tracked.\n */\nOutboundLinkTracker.prototype.shouldTrackOutboundLink =\n    function(link, parseUrl) {\n\n  var href = link.getAttribute('href') || link.getAttribute('xlink:href');\n  var url = parseUrl(href);\n  return url.hostname != location.hostname &&\n      url.protocol.slice(0, 4) == 'http';\n};\n\n\n/**\n * Removes all event listeners and instance properties.\n */\nOutboundLinkTracker.prototype.remove = function() {\n  Object.keys(this.delegates).forEach(function(key) {\n    this.delegates[key].destroy();\n  }.bind(this));\n};\n\n\n/**\n * Determines if a link click event will cause the current page to upload.\n * Note: most link clicks *will* cause the current page to unload because they\n * initiate a page navigation. The most common reason a link click won't cause\n * the page to unload is if the clicked was to open the link in a new tab.\n * @param {Event} event The DOM event.\n * @param {Element} link The link element clicked on.\n * @return {boolean} True if the current page will be unloaded.\n */\nfunction linkClickWillUnloadCurrentPage(event, link) {\n  return !(\n      // The event type can be customized; we only care about clicks here.\n      event.type != 'click' ||\n      // Links with target=\"_blank\" set will open in a new window/tab.\n      link.target == '_blank' ||\n      // On mac, command clicking will open a link in a new tab. Control\n      // clicking does this on windows.\n      event.metaKey || event.ctrlKey ||\n      // Shift clicking in Chrome/Firefox opens the link in a new window\n      // In Safari it adds the URL to a favorites list.\n      event.shiftKey ||\n      // On Mac, clicking with the option key is used to download a resouce.\n      event.altKey ||\n      // Middle mouse button clicks (which == 2) are used to open a link\n      // in a new tab, and right clicks (which == 3) on Firefox trigger\n      // a click event.\n      event.which > 1);\n}\n\n\nprovide('outboundLinkTracker', OutboundLinkTracker);\n\n},{\"../provide\":11,\"../usage\":14,\"../utilities\":15,\"dom-utils/lib/delegate\":20,\"dom-utils/lib/parse-url\":24,\"object-assign\":16}],9:[function(require,module,exports){\n/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar parseUrl = require('dom-utils/lib/parse-url');\nvar assign = require('object-assign');\nvar constants = require('../constants');\nvar provide = require('../provide');\nvar Session = require('../session');\nvar Store = require('../storage');\nvar usage = require('../usage');\nvar createFieldsObj = require('../utilities').createFieldsObj;\nvar now = require('../utilities').now;\nvar uuid = require('../utilities').uuid;\n\n\nvar HIDDEN = 'hidden';\nvar VISIBLE = 'visible';\nvar PAGE_ID = uuid();\nvar SECONDS = 1000;\nvar MINUTES = 60 * SECONDS;\n\n\n/**\n * Registers outbound link tracking on tracker object.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction PageVisibilityTracker(tracker, opts) {\n  usage.track(tracker, usage.plugins.PAGE_VISIBILITY_TRACKER);\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.addEventListener) return;\n\n  this.opts = assign({\n    sessionTimeout: Session.DEFAULT_TIMEOUT,\n    timeZone: null,\n    hiddenMetricIndex: null,\n    visibleMetricIndex: null,\n    heartbeatTimeout: null,\n    changeTemplate: this.changeTemplate,\n    fieldsObj: {},\n    hitFilter: null\n  }, opts);\n\n  var trackingId = tracker.get('trackingId');\n  this.tracker = tracker;\n\n  // Tracks the initial pageview to ensure Page Visibility events aren't\n  // sent prior to the initial pageview being sent.\n  this.isInitialPageviewSent = false;\n  this.isInitialVisibilityChangeSent = false;\n\n  // Binds methods to `this`.\n  this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n  this.handleWindowUnload = this.handleWindowUnload.bind(this);\n  this.handleStorageChange = this.handleStorageChange.bind(this);\n  this.newSessionDidStart = this.newSessionDidStart.bind(this);\n  this.initialScreenOrPageviewDidSend =\n      this.initialScreenOrPageviewDidSend.bind(this);\n\n  // Creates the store and binds storage change events.\n  this.store = new Store(trackingId, 'plugins/page-visibility-tracker');\n  this.store.storageDidChangeInAnotherWindow = this.handleStorageChange;\n\n  // Creates the session and binds session events.\n  this.session = new Session(tracker, opts.sessionTimeout, opts.timeZone);\n  this.session.newSessionDidStart = this.newSessionDidStart;\n  this.session.initialScreenOrPageviewDidSend =\n      this.initialScreenOrPageviewDidSend;\n}\n\n\n/**\n * Handles adding visibility event listeners and trigger the initial\n * visibility change event. This function is invoked as soon as the session\n * manager detects that the initial pageview or screenview has been sent.\n */\nPageVisibilityTracker.prototype.initialScreenOrPageviewDidSend = function() {\n  document.addEventListener('visibilitychange', this.handleVisibilityChange);\n  window.addEventListener('unload', this.handleWindowUnload);\n  this.handleVisibilityChange();\n};\n\n\n/**\n * Updates the store and schedules a new heartbeat anytime a new sessions\n * start is detected in the current tab.\n */\nPageVisibilityTracker.prototype.newSessionDidStart = function() {\n  // Updates the previously stored page and change time to avoid reporting\n  // deltas with events in a prior session.\n  this.store.set({\n    time: now(),\n    page: this.getPage(),\n    pageId: PAGE_ID,\n    // Do not update state, it should only be updated in the change handler.\n  });\n\n  this.scheduleNextHeartbeat();\n};\n\n\n/**\n * Handles responding to `visiblitychange` events.\n * This method sends events when the visibility state changes during active\n * session (active meaning the session has not expired). If the session has\n * expired, a change to `visible` will trigger an additional pageview.\n * This method also sends as the event value (and optionally custom metrics)\n * the elapsed time between this event and the previously reported one change\n * in the same session, allowing you to more accurately determine when users\n * were actually looking at your page versus when it was in the background.\n */\nPageVisibilityTracker.prototype.handleVisibilityChange = function() {\n  // Stores the visibility state on the instance so it can be referenced\n  // in the unload handler.\n  // TODO(philipwalton): consider storing this on the tracker as well.\n  var visibilityState = this.visibilityState = this.getVisibilityState();\n\n  // Ignore visibilityStates that aren't hidden or visible.\n  if (!(visibilityState == VISIBLE || visibilityState == HIDDEN)) return;\n\n  if (visibilityState == HIDDEN) {\n    // Transitions to hidden should stop any scheduled heartbeats.\n    clearTimeout(this.heartbeatTimeout);\n\n    // Hidden events should never be sent if a session has expired\n    // (if they are, they'll likely start a new session with just this event).\n    if (this.session.isExpired()) {\n      this.store.clear();\n      return;\n    }\n  }\n\n  if (visibilityState == VISIBLE) {\n    // If the session has expired, or if a new session has started in another\n    // tab, but the current tab hasn't sent any interaction hits in the new\n    // session, send a pageview prior to the visible event.\n    // This behavior ensures all new sessions start with a pageview so\n    // session-level page dimensions and metrics (e.g. ga:landingPagePath\n    // and ga:entrances) are correct.\n    if (this.session.isExpired() ||\n        this.session.isLastTrackerInteractionFromPreviousSession()) {\n      var defaultFields = {transport: 'beacon'};\n      this.tracker.send('pageview',\n          createFieldsObj(defaultFields, this.opts.fieldsObj,\n              this.tracker, this.opts.hitFilter));\n    }\n    this.scheduleNextHeartbeat();\n  }\n\n  this.sendPageVisibilityEvent('change', visibilityState);\n  this.store.set({\n    time: now(),\n    state: visibilityState,\n    page: this.getPage(),\n    pageId: PAGE_ID,\n  });\n};\n\n\n/**\n * Sends a Page Visibility event with the passed event action and visibility\n * state. If a previous state change exists within the same session, the time\n * delta is tracked as the event label and optionally as a custom metric.\n * @param {string} action The event action.\n * @param {string} visibilityState The pages current visibility state, which\n *     gets set as the event label.\n */\nPageVisibilityTracker.prototype.sendPageVisibilityEvent =\n    function(action, visibilityState) {\n  var lastVisibilityChange = this.store.get();\n\n  var timeSinceLastVisibilityChange =\n      this.getTimeSinceLastVisibilityChange(lastVisibilityChange.time);\n\n  var defaultFields = {\n    transport: 'beacon',\n    nonInteraction: true,\n    eventCategory: 'Page Visibility',\n    eventAction: action,\n    eventLabel: action == 'change' ?\n        this.formatChange(visibilityState, lastVisibilityChange) :\n        constants.NULL_DIMENSION,\n  };\n\n  // If at least a one second delta exists, report it.\n  if (timeSinceLastVisibilityChange) {\n    defaultFields.eventValue = timeSinceLastVisibilityChange;\n\n    // If a custom metric was specified for the current visibility state,\n    // give it the same value as the event value.\n    var metric = this.opts[lastVisibilityChange.state + 'MetricIndex'];\n    if (metric) {\n      defaultFields['metric' + metric] = timeSinceLastVisibilityChange;\n    }\n  }\n\n  // A previous page path is stored, set it as the page value.\n  if (lastVisibilityChange.page) {\n    defaultFields.page = lastVisibilityChange.page;\n  }\n\n  this.tracker.send('event',\n      createFieldsObj(defaultFields, this.opts.fieldsObj,\n          this.tracker, this.opts.hitFilter));\n\n  // Tracks whether a visibility change event has already been sent to avoid\n  // double sending for the initial pageload.\n  this.isInitialVisibilityChangeSent = true;\n};\n\n\n/**\n * Computes the visibility change from and to states and invokes the change\n * template.\n * @param {string} visibilityState The current visibility state.\n * @param {Object} lastVisibilityChange The last visiblity change data. If this\n *     does not include state data, the inverse of `visibilityState` is used.\n * @return {string} The result of the change template function.\n */\nPageVisibilityTracker.prototype.formatChange =\n    function(visibilityState, lastVisibilityChange) {\n  var lastVisibilityState = lastVisibilityChange.state ||\n      (visibilityState == HIDDEN ? VISIBLE : HIDDEN);\n  return this.opts.changeTemplate(lastVisibilityState, visibilityState);\n};\n\n\n/**\n * Calculates the time since the last visibility change event in the current\n * session. If the session has expired the reported time is zero.\n * @param {number} lastVisibilityChangeTime The timestamp of the last change\n *     event.\n * @return {number} The time (in ms) since the last change.\n */\nPageVisibilityTracker.prototype.getTimeSinceLastVisibilityChange =\n    function(lastVisibilityChangeTime) {\n  var isSessionActive = !this.session.isExpired();\n  var timeSinceChange = lastVisibilityChangeTime &&\n      Math.round((now() - lastVisibilityChangeTime) / SECONDS);\n\n  return isSessionActive && timeSinceChange > 0 ? timeSinceChange : 0;\n};\n\n\n/**\n * Handles responding to the `storage` event.\n * The code on this page needs to be informed when other tabs or windows are\n * updating the stored page visibility state data. This method checks to see\n * if a hidden state is stored when there are still visible tabs open, which\n * can happen if multiple windows are open at the same time.\n */\nPageVisibilityTracker.prototype.handleStorageChange = function() {\n  if (this.getVisibilityState() == VISIBLE) {\n    var lastVisibilityChange = this.store.get();\n\n    if (lastVisibilityChange.state == HIDDEN) {\n      // Writing to localStorage inside a storage event handler is dangerous as\n      // it can easily lead to an infinite loop. In this case the write only\n      // happens on pages whose visibility state is `visible` and for which\n      // another page updated the stored visibility state to `hidden`. When\n      // that happens all visible tabs will then invoke this update, but it\n      // won't be invoked a second time per page because after the first time\n      // the stored visibility state will be `visible`. The end result will\n      // be a single page ID stored in the visible state.\n      this.store.set({\n        state: VISIBLE,\n        page: this.getPage(),\n        pageId: PAGE_ID,\n      });\n      this.scheduleNextHeartbeat();\n    }\n  }\n};\n\n\n/**\n * Handles responding to the `unload` event.\n * Since some browsers don't emit a `visibilitychange` event in all cases where\n * a page might be unloaded, it's necessary to hook into the `unload` event to\n * ensure the correct state is always stored.\n */\nPageVisibilityTracker.prototype.handleWindowUnload = function() {\n  if (this.visibilityState != HIDDEN) {\n    this.handleVisibilityChange();\n  }\n};\n\n\n/**\n * Schedules a non-interaction hit to be sent every minute (by default) for\n * pages that are visible. This allows for significantly more accurate page\n * visibility metrics.\n */\nPageVisibilityTracker.prototype.scheduleNextHeartbeat = function() {\n  // Only schedule a heartbeat events if the option is explicitly set.\n  if (!this.opts.heartbeatTimeout) return;\n\n  clearTimeout(this.heartbeatTimeout);\n  this.heartbeatTimeout = setTimeout(function() {\n    // Heartbeat events should stop if the session has expired.\n    if (this.session.isExpired()) return;\n\n    var visibilityState = this.getVisibilityState();\n    var lastVisibilityChange = this.store.get();\n\n    if (visibilityState == VISIBLE &&\n        lastVisibilityChange.state == VISIBLE &&\n        lastVisibilityChange.pageId == PAGE_ID) {\n\n      this.sendPageVisibilityEvent('heartbeat', constants.NULL_DIMENSION);\n      this.scheduleNextHeartbeat();\n\n      this.store.set({time: now()});\n    }\n  }.bind(this), this.opts.heartbeatTimeout * MINUTES);\n};\n\n\n/**\n * Sets the default formatting of the change event label.\n * This can be overridden by setting the `changeTemplate` option.\n * @param {string} oldValue The value of the media query prior to the change.\n * @param {string} newValue The value of the media query after the change.\n * @return {string} The formatted event label.\n */\nPageVisibilityTracker.prototype.changeTemplate = function(oldValue, newValue) {\n  return oldValue + ' => ' + newValue;\n};\n\n\n/**\n * Gets the current page field from the tracker or infers it from the\n * location field.\n * @return {string} The real or inferred page field.\n */\nPageVisibilityTracker.prototype.getPage = function() {\n  var page = this.tracker.get('page');\n  if (page) {\n    return page;\n  } else {\n    var locationUrl = parseUrl(this.tracker.get('location'));\n    return locationUrl.path + locationUrl.hash;\n  }\n};\n\n\n/**\n * Returns the visibility state of the document. The primary purpose of this\n * method is for testing since `document.visibilityState` can't be altered.\n * @return {string} The visibility state.\n */\nPageVisibilityTracker.prototype.getVisibilityState = function() {\n  return document.visibilityState;\n};\n\n\n/**\n * Removes all event listeners and instance properties.\n */\n PageVisibilityTracker.prototype.remove = function() {\n  clearTimeout(this.heartbeatTimeout);\n  this.tracker.send = this.oldTrackerSendMethod;\n  this.session.restore();\n\n  document.removeEventListener('visibilitychange', this.handleVisibilityChange);\n  window.removeEventListener('storage', this.handleStorageChange);\n  window.removeEventListener('unload', this.handleWindowUnload);\n};\n\n\nprovide('pageVisibilityTracker', PageVisibilityTracker);\n\n},{\"../constants\":4,\"../provide\":11,\"../session\":12,\"../storage\":13,\"../usage\":14,\"../utilities\":15,\"dom-utils/lib/parse-url\":24,\"object-assign\":16}],10:[function(require,module,exports){\n/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/* global FB, twttr */\n\n\nvar assign = require('object-assign');\nvar provide = require('../provide');\nvar usage = require('../usage');\nvar createFieldsObj = require('../utilities').createFieldsObj;\n\n\n/**\n * Registers social tracking on tracker object.\n * Supports both declarative social tracking via HTML attributes as well as\n * tracking for social events when using official Twitter or Facebook widgets.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction SocialWidgetTracker(tracker, opts) {\n\n  usage.track(tracker, usage.plugins.SOCIAL_WIDGET_TRACKER);\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.addEventListener) return;\n\n  this.opts = assign({\n    fieldsObj: {},\n    hitFilter: null\n  }, opts);\n\n  this.tracker = tracker;\n\n  // Binds methods to `this`.\n  this.addWidgetListeners = this.addWidgetListeners.bind(this);\n  this.addTwitterEventHandlers = this.addTwitterEventHandlers.bind(this);\n  this.handleTweetEvents = this.handleTweetEvents.bind(this);\n  this.handleFollowEvents = this.handleFollowEvents.bind(this);\n  this.handleLikeEvents = this.handleLikeEvents.bind(this);\n  this.handleUnlikeEvents = this.handleUnlikeEvents.bind(this);\n\n  if (document.readyState != 'complete') {\n    // Adds the widget listeners after the window's `load` event fires.\n    // If loading widgets using the officially recommended snippets, they\n    // will be available at `window.load`. If not users can call the\n    // `addWidgetListeners` method manually.\n    window.addEventListener('load', this.addWidgetListeners);\n  }\n  else {\n    this.addWidgetListeners();\n  }\n}\n\n\n/**\n * Invokes the methods to add Facebook and Twitter widget event listeners.\n * Ensures the respective global namespaces are present before adding.\n */\nSocialWidgetTracker.prototype.addWidgetListeners = function() {\n  if (window.FB) this.addFacebookEventHandlers();\n  if (window.twttr) this.addTwitterEventHandlers();\n};\n\n\n/**\n * Adds event handlers for the \"tweet\" and \"follow\" events emitted by the\n * official tweet and follow buttons. Note: this does not capture tweet or\n * follow events emitted by other Twitter widgets (tweet, timeline, etc.).\n */\nSocialWidgetTracker.prototype.addTwitterEventHandlers = function() {\n  try {\n    twttr.ready(function() {\n      twttr.events.bind('tweet', this.handleTweetEvents);\n      twttr.events.bind('follow', this.handleFollowEvents);\n    }.bind(this));\n  } catch(err) {}\n};\n\n\n/**\n * Removes event handlers for the \"tweet\" and \"follow\" events emitted by the\n * official tweet and follow buttons.\n */\nSocialWidgetTracker.prototype.removeTwitterEventHandlers = function() {\n  try {\n    twttr.ready(function() {\n      twttr.events.unbind('tweet', this.handleTweetEvents);\n      twttr.events.unbind('follow', this.handleFollowEvents);\n    }.bind(this));\n  } catch(err) {}\n};\n\n\n/**\n * Adds event handlers for the \"like\" and \"unlike\" events emitted by the\n * official Facebook like button.\n */\nSocialWidgetTracker.prototype.addFacebookEventHandlers = function() {\n  try {\n    FB.Event.subscribe('edge.create', this.handleLikeEvents);\n    FB.Event.subscribe('edge.remove', this.handleUnlikeEvents);\n  } catch(err) {}\n};\n\n\n/**\n * Removes event handlers for the \"like\" and \"unlike\" events emitted by the\n * official Facebook like button.\n */\nSocialWidgetTracker.prototype.removeFacebookEventHandlers = function() {\n  try {\n    FB.Event.unsubscribe('edge.create', this.handleLikeEvents);\n    FB.Event.unsubscribe('edge.remove', this.handleUnlikeEvents);\n  } catch(err) {}\n};\n\n\n/**\n * Handles `tweet` events emitted by the Twitter JS SDK.\n * @param {Object} event The Twitter event object passed to the handler.\n */\nSocialWidgetTracker.prototype.handleTweetEvents = function(event) {\n  // Ignores tweets from widgets that aren't the tweet button.\n  if (event.region != 'tweet') return;\n\n  var url = event.data.url || event.target.getAttribute('data-url') ||\n      location.href;\n\n  var defaultFields = {\n    transport: 'beacon',\n    socialNetwork: 'Twitter',\n    socialAction: 'tweet',\n    socialTarget: url\n  };\n  this.tracker.send('social', createFieldsObj(defaultFields,\n      this.opts.fieldsObj, this.tracker, this.opts.hitFilter));\n};\n\n\n/**\n * Handles `follow` events emitted by the Twitter JS SDK.\n * @param {Object} event The Twitter event object passed to the handler.\n */\nSocialWidgetTracker.prototype.handleFollowEvents = function(event) {\n  // Ignore follows from widgets that aren't the follow button.\n  if (event.region != 'follow') return;\n\n  var screenName = event.data.screen_name ||\n      event.target.getAttribute('data-screen-name');\n\n  var defaultFields = {\n    transport: 'beacon',\n    socialNetwork: 'Twitter',\n    socialAction: 'follow',\n    socialTarget: screenName\n  };\n  this.tracker.send('social', createFieldsObj(defaultFields,\n      this.opts.fieldsObj, this.tracker, this.opts.hitFilter));\n};\n\n\n/**\n * Handles `like` events emitted by the Facebook JS SDK.\n * @param {string} url The URL corresponding to the like event.\n */\nSocialWidgetTracker.prototype.handleLikeEvents = function(url) {\n  var defaultFields = {\n    transport: 'beacon',\n    socialNetwork: 'Facebook',\n    socialAction: 'like',\n    socialTarget: url\n  };\n  this.tracker.send('social', createFieldsObj(defaultFields,\n      this.opts.fieldsObj, this.tracker, this.opts.hitFilter));\n};\n\n\n/**\n * Handles `unlike` events emitted by the Facebook JS SDK.\n * @param {string} url The URL corresponding to the unlike event.\n */\nSocialWidgetTracker.prototype.handleUnlikeEvents = function(url) {\n  var defaultFields = {\n    transport: 'beacon',\n    socialNetwork: 'Facebook',\n    socialAction: 'unlike',\n    socialTarget: url\n  };\n  this.tracker.send('social', createFieldsObj(defaultFields,\n      this.opts.fieldsObj, this.tracker, this.opts.hitFilter));\n};\n\n\n/**\n * Removes all event listeners and instance properties.\n */\nSocialWidgetTracker.prototype.remove = function() {\n  window.removeEventListener('load', this.addWidgetListeners);\n  this.removeFacebookEventHandlers();\n  this.removeTwitterEventHandlers();\n};\n\n\nprovide('socialWidgetTracker', SocialWidgetTracker);\n\n},{\"../provide\":11,\"../usage\":14,\"../utilities\":15,\"object-assign\":16}],11:[function(require,module,exports){\n/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar constants = require('./constants');\nvar utilities = require('./utilities');\n\n\n// Adds the dev ID to the list of dev IDs if any plugin is used.\n(window.gaDevIds = window.gaDevIds || []).push(constants.DEV_ID);\n\n\n/**\n * Provides a plugin for use with analytics.js, accounting for the possibility\n * that the global command queue has been renamed or not yet defined.\n * @param {string} pluginName The plugin name identifier.\n * @param {Function} pluginConstructor The plugin constructor function.\n */\nmodule.exports = function providePlugin(pluginName, pluginConstructor) {\n  var gaAlias = window['GoogleAnalyticsObject'] || 'ga';\n  window[gaAlias] = window[gaAlias] || function() {\n    (window[gaAlias]['q'] = window[gaAlias]['q'] || []).push(arguments);\n  };\n\n  // Formally provides the plugin for use with analytics.js.\n  window[gaAlias]('provide', pluginName, pluginConstructor);\n\n  // Registers the plugin on the global gaplugins object.\n  window.gaplugins = window.gaplugins || {};\n  window.gaplugins[utilities.capitalize(pluginName)] = pluginConstructor;\n};\n\n},{\"./constants\":4,\"./utilities\":15}],12:[function(require,module,exports){\n/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar Store = require('./storage');\nvar now = require('./utilities').now;\n\n\nvar MINUTES = 60 * 1000;\n\n\nvar instances = {};\n\n\n/**\n * Creates a session management object that helps track session boundaries\n * across multple open tabs/windows.\n * @param {Object} tracker An analytics.js tracker object.\n * @param {number} timeout The session timeout (in minutes). This value should\n *     match what's set in the \"Session settings\" section of the Google\n *     Analytics admin.\n * @param {string=} timeZone The optional IANA time zone of the view. This\n *     value should match what's set in the \"View settings\" section of the\n *     Google Analytics admin. (Note: this assumes all views for the property\n *     use the same time zone. If that's not true, it's better not to use\n *     this feature).\n * @return {Session} The Session instance.\n */\nfunction Session(tracker, timeout, timeZone) {\n  // Don't create multiple instances for the same property.\n  var trackingId = tracker.get('trackingId');\n  if (instances[trackingId]) {\n    return instances[trackingId];\n  } else {\n    instances[trackingId] = this;\n  }\n\n  this.tracker = tracker;\n  this.timeout = timeout || Session.DEFAULT_TIMEOUT;\n  this.timeZone = timeZone;\n\n  this.isInitialScreenOrPageviewSent_ = false;\n  this.isTrackerActiveInSession_ = false;\n  this.sessionCount_ = 0;\n\n  // Binds methods.\n  this.sendHitTask = this.sendHitTask.bind(this);\n  this.handleStorage = this.handleStorage.bind(this);\n\n  // Overrides the trackers sendHitTask.\n  this.oldSendHitTask = this.tracker.get('sendHitTask');\n  this.tracker.set('sendHitTask', this.sendHitTask);\n\n  // Creates the session store and adds change listeners.\n  this.store = new Store(trackingId, 'session', {hitTime: 0, sessionCount: 0});\n  this.store.storageDidChangeInAnotherWindow = this.handleStorage;\n}\n\n\n/**\n * Accepts a tracker object and returns whether or not the session for that\n * tracker has expired. A session can expire for two reasons:\n *   - More than 30 minutes has elapsed since the previous interaction hit\n *     was sent (The 30 minutes number is the Google Analytics default, but\n *     it can be modified in GA admin \"Session settings\").\n *   - A new day has started since the previous interaction hit, in the\n *     specified time zone (should correspond to the time zone of the\n *     property's views).\n *\n * Note: since real session boundaries are determined at processing time,\n * this is just a best guess rather than a source of truth.\n *\n * @param {Object=} sessionData An optional sessionData object which avoids\n *     an additional localStorage read if the data is known to be fresh.\n * @return {boolean} True of the session has expired.\n */\nSession.prototype.isExpired = function(sessionData) {\n  if (!sessionData) {\n    sessionData = this.store.get();\n  }\n\n  var currentData = new Date();\n  var oldHitTime = sessionData.hitTime;\n  var oldHitDate = oldHitTime && new Date(oldHitTime);\n\n  if (oldHitTime) {\n    if (currentData - oldHitDate > (this.timeout * MINUTES)) {\n      // If more time has elapsed than the session expiry time,\n      // the session has expired.\n      return true;\n    } else if (this.timeZone &&\n        getDateInTimezone(currentData, this.timeZone) !=\n        getDateInTimezone(oldHitDate, this.timeZone)) {\n      // A new day has started since the previous hit, which means the\n      // session has expired.\n      return true;\n    }\n  }\n\n  // For all other cases return false.\n  return false;\n};\n\n\n/**\n * Returns true if the tracker has a record of an interaction hit occuring\n * as well as a record of it being from a previous session. If any of that\n * information is missing, err on the side of caution.\n * Note: this is different from the `isExpired` method in that it only refers\n * to the current tracker. It's possible another tab is open and sending hits\n * (meaning the session is not expired), but this tracker has not sent a hit\n * this session.\n * @return {boolean} True if enough evidence exists to be fairly certain.\n */\nSession.prototype.isLastTrackerInteractionFromPreviousSession = function() {\n  var globalSessionCount = this.store.get().sessionCount;\n  var trackerSessionCount = this.sessionCount_;\n  var hasBeenActiveEver = this.hasSentInteractionHit;\n\n  return hasBeenActiveEver && globalSessionCount > trackerSessionCount;\n};\n\n\n/**\n * Keeps track of when the previous interaction hits were sent as well as\n * when the initial pageview or screenview is sent. The last interaction hit\n * time is used to determine if the session has expired.\n * @param {Object} model The analytics.js model object.\n */\nSession.prototype.sendHitTask = function(model) {\n  var hitType = model.get('hitType');\n  var isInteractionHit = !(\n      model.get('nonInteraction') ||\n      hitType == 'timing' ||\n      hitType == 'data');\n\n  // Try sending the hit and, if it throws, exit early. Note, once the\n  //  original sendHitTask is run, you should not access the `model` object.\n  try {\n    this.oldSendHitTask.call(null, model);\n  } catch(err) {\n    return;\n  }\n\n  var sessionData = this.store.get();\n  if (isInteractionHit) {\n    var isSessionExpired = this.isExpired(sessionData);\n\n    // Update the stored session data.\n    sessionData.hitTime = now();\n    if (isSessionExpired) sessionData.sessionCount++;\n    this.store.set(sessionData);\n\n    // TODO(philipwalton): Update the session count on the tracker as well.\n    // to determine if the correct tracker is active in the current session.\n    this.sessionCount_ = sessionData.sessionCount;\n    this.hasSentInteractionHit = true;\n\n    // Interaction hits are always active in the current session.\n    this.isTrackerActiveInSession_ = true;\n\n    // Trigger callbacks if the session has expired. This should be done\n    // after the new data in stored in case it needs to be read.\n    if (isSessionExpired) this.newSessionDidStart();\n  }\n\n  if ((hitType == 'pageview' || hitType == 'screenview') &&\n      !this.isInitialScreenOrPageviewSent_) {\n    this.isInitialScreenOrPageviewSent_ = true;\n    this.initialScreenOrPageviewDidSend();\n  }\n};\n\n\n/**\n * Handles changes to the localStorage key from other tabs.\n * If the change incremented the session count, it invokes the\n * `newSessionDidStartInAnotherWindow()` method.\n * @param {Object} newData The data after the write.\n * @param {Object} oldData The data before the write.\n */\nSession.prototype.handleStorage = function(newData, oldData) {\n  if (newData.sessionCount > oldData.sessionCount) {\n    this.newSessionDidStartInAnotherWindow();\n  }\n};\n\n\n/**\n * Restores the tracker's original `sendHitTask` to the state before\n * session control was initialized and removes this instance from the global\n * store.\n * @param {Object} tracker The analytics.js tracker object.\n */\nSession.prototype.destroy = function() {\n  if (this.oldSendHitTask) {\n    this.tracker.set('sendHitTask', this.oldSendHitTask);\n    this.oldSendHitTask = null;\n  }\n  this.store.destroy();\n  delete instances[this.tracker.get('trackingId')];\n};\n\n\n/**\n * Placeholder to be set on the instance itself.\n */\nSession.prototype.initialScreenOrPageviewDidSend = function() {\n  // TODO(philipwalton): consider allowing multiple callbacks here.\n  // As it stands, if another plugin creates an instance for the same\n  // tracker, these methods will be overridden.\n};\n\n\n/**\n * Placeholder to be set on the instance itself.\n */\nSession.prototype.newSessionDidStart = function() {\n  // TODO(philipwalton): consider allowing multiple callbacks here.\n  // As it stands, if another plugin creates an instance for the same\n  // tracker, these methods will be overridden.\n};\n\n\n/**\n * Placeholder to be set on the instance itself.\n */\nSession.prototype.newSessionDidStartInAnotherWindow = function() {\n  // TODO(philipwalton): consider allowing multiple callbacks here.\n  // As it stands, if another plugin creates an instance for the same\n  // tracker, these methods will be overridden.\n};\n\n\nSession.DEFAULT_TIMEOUT = 30; // Minutes.\n\n\nmodule.exports = Session;\n\n\n/**\n * Accepts a date a returns a date string in the passed time zone.\n * Note: the format of the returned date string is not relevant because it is\n * never parsed, it's only compared to see if two dates are the same.\n * @param {Date} date The date object to convert.\n * @param {string} timeZone The IANA time zone, e.g. 'America/Los_Angeles'.\n * @return {string} The formatted date string in the passed time zone.\n */\nfunction getDateInTimezone(date, timeZone) {\n  // Not all browsers support all time zones, so catch possible errors and\n  // return false if the formatting fails.\n  try {\n    return new Intl.DateTimeFormat('en-US', {\n      timeZone: timeZone\n    }).format(date);\n  } catch(err) {\n    return false;\n  }\n}\n},{\"./storage\":13,\"./utilities\":15}],13:[function(require,module,exports){\n/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar assign = require('object-assign');\n\n\nvar AUTOTRACK_PREFIX = 'autotrack';\n\n\nvar stores = {};\nvar isListening = false;\n\n\n/**\n * Adds a single storage event listener and flips the global `isListening`\n * flag so multiple events aren't added.\n */\nfunction initStorageListener() {\n  window.addEventListener('storage', storageListener);\n  isListening = true;\n}\n\n\n/**\n * Removes the storage event listener and flips the global `isListening`\n * flag so it can be re-added later.\n */\nfunction removeStorageListener() {\n  window.removeEventListener('storage', storageListener);\n  isListening = false;\n}\n\n\n/**\n * The global storage event listener.\n * @param {StorageEvent} event The DOM event.\n */\nfunction storageListener(event) {\n  var store = stores[event.key];\n  if (store) {\n    var oldData = parse(event.oldValue, store.defaults);\n    var newData = parse(event.newValue, store.defaults);\n    store.storageDidChangeInAnotherWindow(newData, oldData);\n  }\n}\n\n\n/**\n * Parses a source string as JSON and merges the result with the passed\n * defaults object. If an error occurs while\n * @param {string} source A JSON string of data.\n * @param {Object} defaults An object of key/value defaults.\n * @return {Object} The parsed data object merged with the passed defaults.\n */\nfunction parse(source, defaults) {\n  var data;\n  try {\n    data = JSON.parse(source);\n  } catch(err) {\n    data = {};\n  }\n  return assign({}, defaults, data);\n}\n\n\n/**\n * A storage object to simplify interacting with localStorage.\n * @param {string} trackingId The tracking ID for the GA property.\n * @param {string} namespace A namespace unique to this store.\n * @param {Object=} defaults An optional object of key/value defaults.\n * @return {Store} The Store instance.\n */\nfunction Store(trackingId, namespace, defaults) {\n  var key = [AUTOTRACK_PREFIX, trackingId, namespace].join(':');\n\n  // Don't create multiple instances for the same property.\n  if (stores[key]) {\n    return stores[key];\n  } else {\n    stores[key] = this;\n    if (!isListening) initStorageListener();\n  }\n\n  this.key = key;\n  this.defaults = defaults || {};\n}\n\n\n/**\n * Gets the data stored in localStorage for this store.\n * @return {Object} The stored data merged with the defaults.\n */\nStore.prototype.get = function() {\n  // TODO(philipwalton): Implementation schema migrations if/when a new\n  // schema version is introduced.\n  return parse(\n      window.localStorage && window.localStorage.getItem(this.key),\n      this.defaults);\n};\n\n\n/**\n * Saves the passed data object to localStorage,\n * merging it with the existing data.\n * @param {Object} newData The data to save.\n */\nStore.prototype.set = function(newData) {\n  var oldData = this.get();\n  var mergedData = assign(oldData, newData);\n  window.localStorage &&\n      window.localStorage.setItem(this.key, JSON.stringify(mergedData));\n};\n\n\n/**\n * Clears the data in localStorage for the current store.\n */\nStore.prototype.clear = function() {\n  window.localStorage && window.localStorage.removeItem(this.key);\n};\n\n\n/**\n * Removes the store instance for the global stores map. If this is the last\n * store instance, the storage listener is also removed.\n * Note: this does not erase the stored data. Use `clear()` for that.\n */\nStore.prototype.destroy = function() {\n  delete stores[this.key];\n  if (!Object.keys(stores).length) {\n    removeStorageListener();\n  }\n};\n\n\n/**\n * A function to be invoked whenever the storage event fires for this\n * storage key.\n * The function is passed two objects: (newData, oldData).\n */\nStore.prototype.storageDidChangeInAnotherWindow = function() {\n  // Set on instance.\n  // TODO(philipwalton): consider allowing multiple callbacks here.\n  // As it stands, if another plugin creates an instance for the same\n  // tracker, these methods will be overridden.\n};\n\n\nmodule.exports = Store;\n\n\n},{\"object-assign\":16}],14:[function(require,module,exports){\n/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar constants = require('./constants');\n\n\nvar plugins = {\n  CLEAN_URL_TRACKER: 1,\n  EVENT_TRACKER: 2,\n  IMPRESSION_TRACKER: 3,\n  MEDIA_QUERY_TRACKER: 4,\n  OUTBOUND_FORM_TRACKER: 5,\n  OUTBOUND_LINK_TRACKER: 6,\n  PAGE_VISIBILITY_TRACKER: 7,\n  SOCIAL_WIDGET_TRACKER: 8,\n  URL_CHANGE_TRACKER: 9\n};\nvar PLUGIN_COUNT = 9;\n\n\n/**\n * Converts a hexadecimal string to a binary string.\n * @param {string} hex A hexadecimal numeric string.\n * @return {string} a binary numeric string.\n */\nfunction convertHexToBin(hex) {\n  return parseInt(hex || '0', 16).toString(2);\n}\n\n\n/**\n * Converts a binary string to a hexadecimal string.\n * @param {string} bin A binary numeric string.\n * @return {string} a hexadecimal numeric string.\n */\nfunction convertBinToHex(bin) {\n  return parseInt(bin || '0', 2).toString(16);\n}\n\n\n/**\n * Adds leading zeros to a string if it's less than a minimum length.\n * @param {string} str A string to pad.\n * @param {number} len The minimum length of the string\n * @return {string} The padded string.\n */\nfunction padZeros(str, len) {\n  if (str.length < len) {\n    var toAdd = len - str.length;\n    while (toAdd) {\n      str = '0' + str;\n      toAdd--;\n    }\n  }\n  return str;\n}\n\n\n/**\n * Accepts a binary numeric string and flips the digit from 0 to 1 at the\n * specified index.\n * @param {string} str The binary numeric string.\n * @param {number} index The index to flip the bit.\n * @return {string} The new binary string with the bit flipped on\n */\nfunction flipBitOn(str, index) {\n  return str.substr(0, index) + 1 + str.substr(index + 1);\n}\n\n\n/**\n * Accepts a tracker and a plugin index and flips the bit at the specified\n * index on the tracker's usage parameter.\n * @param {Object} tracker An analytics.js tracker.\n * @param {number} pluginIndex The index of the plugin in the global list.\n */\nfunction trackPlugin(tracker, pluginIndex) {\n  var usageHex = tracker.get('&' + constants.USAGE_PARAM);\n  var usageBin = padZeros(convertHexToBin(usageHex), PLUGIN_COUNT);\n\n  // Flip the bit of the plugin being tracked.\n  usageBin = flipBitOn(usageBin, PLUGIN_COUNT - pluginIndex);\n\n  // Stores the modified usage string back on the tracker.\n  tracker.set('&' + constants.USAGE_PARAM, convertBinToHex(usageBin));\n}\n\n\n/**\n * Accepts a tracker and adds the current version to the version param.\n * @param {Object} tracker An analytics.js tracker.\n */\nfunction trackVersion(tracker) {\n  tracker.set('&' + constants.VERSION_PARAM, constants.VERSION);\n}\n\n\nmodule.exports = {\n  track: function(tracker, plugin) {\n    trackVersion(tracker);\n    trackPlugin(tracker, plugin);\n  },\n  plugins: plugins\n};\n\n},{\"./constants\":4}],15:[function(require,module,exports){\n/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar assign = require('object-assign');\nvar getAttributes = require('dom-utils/lib/get-attributes');\n\n\nvar utilities = {\n  /**\n   * Accepts default and user override fields and an optional tracker, hit\n   * filter, and target element and returns a single object that can be used in\n   * `ga('send', ...)` commands.\n   * @param {Object} defaultFields The default fields to return.\n   * @param {Object} userFields Fields set by the user to override the defaults.\n   * @param {Object} opt_tracker The tracker object to apply the hit filter to.\n   * @param {Function} opt_hitFilter A filter function that gets\n   *     called with the tracker model right before the `buildHitTask`. It can\n   *     be used to modify the model for the current hit only.\n   * @param {Element} opt_target If the hit originated from an interaction\n   *     with a DOM element, hitFilter is invoked with that element as the\n   *     second argument.\n   * @return {Object} The final fields object.\n   */\n  createFieldsObj: function(\n      defaultFields, userFields, opt_tracker, opt_hitFilter, opt_target) {\n\n    if (typeof opt_hitFilter == 'function') {\n      var originalBuildHitTask = opt_tracker.get('buildHitTask');\n      return {\n        buildHitTask: function(model) {\n          model.set(defaultFields, null, true);\n          model.set(userFields, null, true);\n          opt_hitFilter(model, opt_target);\n          originalBuildHitTask(model);\n        }\n      };\n    }\n    else {\n      return assign({}, defaultFields, userFields);\n    }\n  },\n\n\n  /**\n   * Retrieves the attributes from an DOM element and returns a fields object\n   * for all attributes matching the passed prefix string.\n   * @param {Element} element The DOM element to get attributes from.\n   * @param {string} prefix An attribute prefix. Only the attributes matching\n   *     the prefix will be returned on the fields object.\n   * @return {Object} An object of analytics.js fields and values\n   */\n  getAttributeFields: function(element, prefix) {\n    var attributes = getAttributes(element);\n    var attributeFields = {};\n\n    Object.keys(attributes).forEach(function(attribute) {\n\n      // The `on` prefix is used for event handling but isn't a field.\n      if (attribute.indexOf(prefix) === 0 && attribute != prefix + 'on') {\n\n        var value = attributes[attribute];\n\n        // Detects Boolean value strings.\n        if (value == 'true') value = true;\n        if (value == 'false') value = false;\n\n        var field = utilities.camelCase(attribute.slice(prefix.length));\n        attributeFields[field] = value;\n      }\n    });\n\n    return attributeFields;\n  },\n\n\n  /**\n   * Accepts a function to be invoked one the DOM is ready. If the DOM is\n   * already ready, the callback is invoked immediately.\n   * @param {Function} callback The ready callback.\n   */\n  domReady: function(callback) {\n    if (document.readyState == 'loading') {\n      document.addEventListener('DOMContentLoaded', function fn() {\n        document.removeEventListener('DOMContentLoaded', fn);\n        callback();\n      });\n    } else {\n      callback();\n    }\n  },\n\n\n  /**\n   * Accepts a function and returns a wrapped version of the function that is\n   * expected to be called elsewhere in the system. If it's not called\n   * elsewhere after the timeout period, it's called regardless. The wrapper\n   * function also prevents the callback from being called more than once.\n   * @param {Function} callback The function to call.\n   * @param {number} wait How many milliseconds to wait before invoking\n   *     the callback.\n   * @returns {Function} The wrapped version of the passed function.\n   */\n  withTimeout: function(callback, wait) {\n    var called = false;\n    var fn = function() {\n      if (!called) {\n        called = true;\n        callback();\n      }\n    };\n    setTimeout(fn, wait || 2000);\n    return fn;\n  },\n\n\n  /**\n   * Accepts a string containing hyphen or underscore word separators and\n   * converts it to camelCase.\n   * @param {string} str The string to camelCase.\n   * @return {string} The camelCased version of the string.\n   */\n  camelCase: function(str) {\n    return str.replace(/[\\-\\_]+(\\w?)/g, function(match, p1) {\n      return p1.toUpperCase();\n    });\n  },\n\n\n  /**\n   * Capitalizes the first letter of a string.\n   * @param {string} str The input string.\n   * @return {string} The capitalized string\n   */\n  capitalize: function(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  },\n\n\n  /**\n   * Indicates whether the passed variable is a JavaScript object.\n   * @param {*} value The input variable to test.\n   * @return {boolean} Whether or not the test is an object.\n   */\n  isObject: function(value) {\n    return typeof value == 'object' && value !== null;\n  },\n\n\n  /**\n   * Indicates whether the passed variable is a JavaScript array.\n   * @param {*} value The input variable to test.\n   * @return {boolean} Whether or not the value is an array.\n   */\n  isArray: Array.isArray || function(value) {\n    return Object.prototype.toString.call(value) === '[object Array]';\n  },\n\n\n  /**\n   * Accepts a value that may or may not be an array. If it is not an array,\n   * it is returned as the first item in a single-item array.\n   * @param {*} value The value to convert to an array if it is not.\n   * @return {Array} The array-ified value.\n   */\n  toArray: function(value) {\n    return utilities.isArray(value) ? value : [value];\n  },\n\n\n  /**\n   * @return {number} The current date timestamp\n   */\n  now: function() {\n    return +new Date();\n  },\n\n\n  /*eslint-disable */\n  // https://gist.github.com/jed/982883\n  uuid: function b(a){return a?(a^Math.random()*16>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,b)},\n  /*eslint-enable */\n};\n\nmodule.exports = utilities;\n\n},{\"dom-utils/lib/get-attributes\":21,\"object-assign\":16}],16:[function(require,module,exports){\n'use strict';\n/* eslint-disable no-unused-vars */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (e) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (Object.getOwnPropertySymbols) {\n\t\t\tsymbols = Object.getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n},{}],17:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar now = require('date-now');\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = now() - timestamp;\n\n    if (last < wait && last > 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      }\n    }\n  };\n\n  return function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n};\n\n},{\"date-now\":18}],18:[function(require,module,exports){\nmodule.exports = Date.now || now\n\nfunction now() {\n    return new Date().getTime()\n}\n\n},{}],19:[function(require,module,exports){\nvar matches = require('./matches');\nvar parents = require('./parents');\n\n/**\n * Gets the closest parent element that matches the passed selector.\n * @param {Element} element The element whose parents to check.\n * @param {string} selector The CSS selector to match against.\n * @param {boolean} shouldCheckSelf True if the selector should test against\n *     the passed element itself.\n * @return {?Element} The matching element or undefined.\n */\nmodule.exports = function closest(element, selector, shouldCheckSelf) {\n  if (!(element && element.nodeType == 1 && selector)) return;\n\n  var parentElements =\n      (shouldCheckSelf ? [element] : []).concat(parents(element));\n\n  for (var i = 0, parent; parent = parentElements[i]; i++) {\n    if (matches(parent, selector)) return parent;\n  }\n};\n\n},{\"./matches\":22,\"./parents\":23}],20:[function(require,module,exports){\nvar closest = require('./closest');\nvar matches = require('./matches');\n\n/**\n * Delegates the handling of events for an element matching a selector to an\n * ancestor of the matching element.\n * @param {Element} ancestor The ancestor element to add the listener to.\n * @param {string} eventType The event type to listen to.\n * @param {string} selector A CSS selector to match against child elements.\n * @param {Function} callback A function to run any time the event happens.\n * @param {Object} opts A configuration options object. The available options:\n *     - useCapture<boolean>: If true, bind to the event capture phase.\n *     - deep<boolean>: If true, delegate into shadow trees.\n * @return {Object} The delegate object. It contains a destroy method.\n */\n module.exports = function delegate(\n    ancestor, eventType, selector, callback, opts) {\n\n  opts = opts || {};\n\n  // Defines the event listener.\n  var listener = function(event) {\n\n    // If opts.composed is true and the event originated from inside a Shadow\n    // tree, check the composed path nodes.\n    if (opts.composed && typeof event.composedPath == 'function') {\n      var composedPath = event.composedPath();\n      for (var i = 0, node; node = composedPath[i]; i++) {\n        if (node.nodeType == 1 && matches(node, selector)) {\n          delegateTarget = node;\n        }\n      }\n    }\n    // Otherwise check the parents.\n    else {\n      var delegateTarget = closest(event.target, selector, true);\n    }\n\n    if (delegateTarget) {\n      callback.call(delegateTarget, event, delegateTarget);\n    }\n  };\n\n  ancestor.addEventListener(eventType, listener, opts.useCapture);\n\n  return {\n    destroy: function() {\n      ancestor.removeEventListener(eventType, listener, opts.useCapture);\n    }\n  };\n};\n\n},{\"./closest\":19,\"./matches\":22}],21:[function(require,module,exports){\n/**\n * Gets all attributes of an element as a plain JavaScriot object.\n * @param {Element} element The element whose attributes to get.\n * @return {Object} An object whose keys are the attribute keys and whose\n *     values are the attribute values. If no attributes exist, an empty\n *     object is returned.\n */\nmodule.exports = function getAttributes(element) {\n  var attrs = {};\n\n  // Validate input.\n  if (!(element && element.nodeType == 1)) return attrs;\n\n  // Return an empty object if there are no attributes.\n  var map = element.attributes;\n  if (map.length === 0) return {};\n\n  for (var i = 0, attr; attr = map[i]; i++) {\n    attrs[attr.name] = attr.value;\n  }\n  return attrs;\n};\n\n},{}],22:[function(require,module,exports){\nvar proto = window.Element.prototype;\nvar nativeMatches = proto.matches ||\n    proto.matchesSelector ||\n    proto.webkitMatchesSelector ||\n    proto.mozMatchesSelector ||\n    proto.msMatchesSelector ||\n    proto.oMatchesSelector;\n\n\n/**\n * Tests whether a DOM element matches a selector. This polyfills the native\n * Element.prototype.matches method across browsers.\n * @param {Element} element The DOM element to test.\n * @param {string} selector The CSS selector to test element against.\n * @return {boolean} True if the selector matches.\n */\n function matchesSelector(element, selector) {\n  if (typeof selector != 'string') return false;\n  if (nativeMatches) return nativeMatches.call(element, selector);\n  var nodes = element.parentNode.querySelectorAll(selector);\n  for (var i = 0, node; node = nodes[i]; i++) {\n    if (node == element) return true;\n  }\n  return false;\n}\n\n\n/**\n * Tests if a DOM elements matches any of the test DOM elements or selectors.\n * @param {Element} element The DOM element to test.\n * @param {Element|string|Array<Element|String>} test A DOM element, a CSS\n *     selector, or an array of DOM elements or CSS selectors to match against.\n * @return {boolean} True of any part of the test matches.\n */\nmodule.exports = function matches(element, test) {\n  // Validate input.\n  if (element && element.nodeType == 1 && test) {\n    // if test is a string or DOM element test it.\n    if (typeof test == 'string' || test.nodeType == 1) {\n      return element == test || matchesSelector(element, test);\n    }\n    // if it has a length property iterate over the items\n    // and return true if any match.\n    else if ('length' in test) {\n      for (var i = 0, item; item = test[i]; i++) {\n        if (element == item || matchesSelector(element, item)) return true;\n      }\n    }\n  }\n  // Still here? Return false\n  return false;\n};\n\n},{}],23:[function(require,module,exports){\n/**\n * Returns an array of a DOM element's parent elements.\n * @param {Element} element The DOM element whose parents to get.\n * @return {Array} An array of all parent elemets, or an empty array if no\n *     parent elements are found.\n */\nmodule.exports = function parents(element) {\n  var list = [];\n  while (element && element.parentNode && element.parentNode.nodeType == 1) {\n    list.push(element = element.parentNode);\n  }\n  return list;\n};\n\n},{}],24:[function(require,module,exports){\nvar HTTP_PORT = '80';\nvar HTTPS_PORT = '443';\nvar DEFAULT_PORT = RegExp(':(' + HTTP_PORT + '|' + HTTPS_PORT + ')$');\n\n\nvar a = document.createElement('a');\nvar cache = {};\n\n\n/**\n * Parses the given url and returns an object mimicing a `Location` object.\n * @param {string} url The url to parse.\n * @return {Object} An object with the same properties as a `Location`\n *    plus the convience properties `path` and `query`.\n */\nmodule.exports = function parseUrl(url) {\n\n  // All falsy values (as well as \".\") should map to the current URL.\n  url = (!url || url == '.') ? location.href : url;\n\n  if (cache[url]) return cache[url];\n\n  a.href = url;\n\n  // When parsing file relative paths (e.g. `../index.html`), IE will correctly\n  // resolve the `href` property but will keep the `..` in the `path` property.\n  // It will also not include the `host` or `hostname` properties. Furthermore,\n  // IE will sometimes return no protocol or just a colon, especially for things\n  // like relative protocol URLs (e.g. \"//google.com\").\n  // To workaround all of these issues, we reparse with the full URL from the\n  // `href` property.\n  if (url.charAt(0) == '.' || url.charAt(0) == '/') return parseUrl(a.href);\n\n  // Don't include default ports.\n  var port = (a.port == HTTP_PORT || a.port == HTTPS_PORT) ? '' : a.port;\n\n  // PhantomJS sets the port to \"0\" when using the file: protocol.\n  port = port == '0' ? '' : port;\n\n  // Sometimes IE incorrectly includes a port for default ports\n  // (e.g. `:80` or `:443`) even when no port is specified in the URL.\n  // http://bit.ly/1rQNoMg\n  var host = a.host.replace(DEFAULT_PORT, '');\n\n  // Not all browser support `origin` so we have to build it.\n  var origin = a.origin ? a.origin : a.protocol + '//' + host;\n\n  // Sometimes IE doesn't include the leading slash for pathname.\n  // http://bit.ly/1rQNoMg\n  var pathname = a.pathname.charAt(0) == '/' ? a.pathname : '/' + a.pathname;\n\n  return cache[url] = {\n    hash: a.hash,\n    host: host,\n    hostname: a.hostname,\n    href: a.href,\n    origin: origin,\n    pathname: pathname,\n    port: port,\n    protocol: a.protocol,\n    search: a.search,\n\n    // Expose additional helpful properties not part of the Location object.\n    fragment: a.hash.slice(1), // The hash without the starting \"#\".\n    path: pathname + a.search, // The pathname and the search query (w/o hash).\n    query: a.search.slice(1) // The search without the starting \"?\".\n  };\n};\n\n},{}]},{},[1])\n\n","import * as analytics from './analytics';\nimport supports from './supports';\n\n\n/**\n * The main script entry point for the site. Initalizes all the sub modules\n * analytics tracking, and the service worker.\n * @param {?Error} err Present if an error occurred loading the polyfills.\n */\nfunction main(err) {\n  // Add an `is-legacy` class on browsers that don't supports flexbox.\n  if (!supports.flexbox()) {\n    let div = document.createElement('div');\n    div.className = 'Error';\n    div.innerHTML = `Your browser does not support Flexbox.\n                     Parts of this site may not appear as expected.`;\n\n    document.body.insertBefore(div, document.body.firstChild);\n  }\n\n  // Delays running any analytics or registering the service worker\n  // to ensure the don't compete for load resources.\n  window.onload = function() {\n    analytics.init();\n    analytics.trackPageload();\n    if (err) {\n      analytics.trackError(err);\n    }\n  };\n}\n\n\nmain();\n","import 'autotrack/lib/plugins/clean-url-tracker';\nimport 'autotrack/lib/plugins/event-tracker';\nimport 'autotrack/lib/plugins/media-query-tracker';\nimport 'autotrack/lib/plugins/outbound-link-tracker';\nimport 'autotrack/lib/plugins/page-visibility-tracker';\nimport 'autotrack/lib/plugins/social-widget-tracker';\nimport parseUrl from 'dom-utils/lib/parse-url';\n\n\n/**\n * Bump this when making backwards incompatible changes to the tracking\n * implementation. This allows you to create a segment or view filter\n * that isolates only data captured with the most recent tracking changes.\n */\nconst TRACKING_VERSION = '1';\n\n\n/**\n * A global list of tracker object, randomized to ensure no one tracker\n * data is always sent first.\n */\nconst ALL_TRACKERS = shuffleArray([\n  {name: 't0', trackingId: 'UA-40829935-1'},\n  {name: 'testing', trackingId: 'UA-40829935-4'}\n]);\n\n\nconst TEST_TRACKERS = ALL_TRACKERS.filter(({name}) => /test/.test(name));\nconst NULL_VALUE = '(not set)';\n\n\nconst metrics = {\n  PAGE_VISIBLE: 'metric1',\n  PAGE_HIDDEN: 'metric2',\n};\n\n\nconst dimensions = {\n  BREAKPOINT: 'dimension1',\n  RESOLUTION: 'dimension2',\n  ORIENTATION: 'dimension3',\n  HIT_SOURCE: 'dimension4',\n  URL_QUERY_PARAMS: 'dimension5',\n  METRIC_VALUE: 'dimension6',\n  CLIENT_ID: 'dimension7',\n  HIT_TYPE: 'dimension8',\n  HIT_TIME: 'dimension9',\n  HIT_ID: 'dimension10',\n  WINDOW_ID: 'dimension11',\n  VISIBILITY_STATE: 'dimension12',\n  TRACKING_VERSION: 'dimension13',\n  PAGE_PATH: 'dimension14'\n};\n\n\n// The command queue proxies.\nconst gaAll = createGaProxy(ALL_TRACKERS);\nconst gaTest = createGaProxy(TEST_TRACKERS);\n\n\n/**\n * Initializes all the analytics setup. Creates trackers and sets initial\n * values on the trackers.\n */\nexport function init() {\n  createTrackers();\n  trackErrors();\n\n  trackCustomDimensions();\n  requireAutotrackPlugins();\n}\n\n\n/**\n * Tracks the initial pageload and performance timing data associated with it.\n */\nexport function trackPageload() {\n  sendInitialPageview();\n}\n\n\n/**\n * Tracks a JavaScript error.\n * @param {Error} err The error object to track.\n */\nexport function trackError(err) {\n  gaAll('send', 'event', 'Script', 'error', err.stack || err.toString(), {\n    nonInteraction: true,\n  });\n}\n\n\n/**\n * Creates the trackers and sets the default transport and tracking\n * version fields. In non-production environments it also logs hits.\n */\nfunction createTrackers() {\n  for (let tracker of ALL_TRACKERS) {\n    window.ga('create', tracker.trackingId, 'auto', tracker.name, {\n      siteSpeedSampleRate: 10\n    });\n  }\n\n  // Ensures all hits are sent via `navigator.sendBeacon()`.\n  // Note: this cannot via the `create` command.\n  gaAll('set', 'transport', 'beacon');\n\n  // Log hits in non-production environments.\n  if (process.env.NODE_ENV != 'production') {\n    gaAll('set', 'sendHitTask', function(model) {\n      var paramsToIgnore = ['v', 'did', 't', 'tid', 'ec', 'ea', 'el', 'ev',\n          'a', 'z', 'ul', 'de', 'sd', 'sr', 'vp', 'je', 'fl', 'jid'];\n\n      var hitType = model.get('&t');\n      var hitPayload = model.get('hitPayload');\n      var hit = hitPayload\n          .split('&')\n          .map(decodeURIComponent)\n          .filter((item) => {\n            const [param] = item.split('=');\n            return !(param.charAt(0) === '_' ||\n                paramsToIgnore.indexOf(param) > -1);\n          });\n\n      var parts = [model.get('&tid'), hitType];\n      if (hitType == 'event') {\n        parts = [\n          ...parts,\n          model.get('&ec'),\n          model.get('&ea'),\n          model.get('&el'),\n        ];\n        if (model.get('&ev')) parts.push(model.get('&ev'));\n      }\n\n      window['console'].log(...parts, hit);\n    });\n  }\n}\n\n\n/**\n * Tracks any errors that may have occured on the page prior to analytics being\n * initialized, then adds an event handler to track future errors.\n */\nfunction trackErrors() {\n  // Errors that have occurred prior to this script running are stored on\n  // the `q` property of the window.onerror function.\n  const errorQueue = window.onerror.q || [];\n\n  // Override the temp `onerror()` handler to now send hits to GA.\n  window.onerror = (msg, file, line, col, error) => {\n    gaAll('send', 'event', {\n      eventCategory: 'Script',\n      eventAction: 'uncaught error',\n      eventLabel: error ? error.stack : `${msg}\\n${file}:${line}:${col}`,\n      nonInteraction: true,\n    });\n  };\n\n  // Replay any stored errors in the queue.\n  for (let error of errorQueue) {\n    window.onerror(...error);\n  }\n}\n\n\n/**\n * Sets a default dimension value for all custom dimensions on all trackers.\n */\nfunction trackCustomDimensions() {\n  // Sets a default dimension value for all custom dimensions on all trackers.\n  // This obviously must be done before setting any other custom dimensions.\n  Object.keys(dimensions).forEach((key) => {\n    gaAll('set', dimensions[key], NULL_VALUE);\n  });\n\n  // Adds tracking of dimensions known at page load time.\n  gaTest((tracker) => {\n    tracker.set({\n      [dimensions.TRACKING_VERSION]: TRACKING_VERSION,\n      [dimensions.CLIENT_ID]: tracker.get('clientId'),\n      [dimensions.WINDOW_ID]: uuid(),\n    });\n  });\n\n  // Adds tracking to record each the type, time, uuid, and visibility state\n  // of each hit immediately before it's sent.\n  gaTest((tracker) => {\n    const originalBuildHitTask = tracker.get('buildHitTask');\n    tracker.set('buildHitTask', (model) => {\n      const path = model.get('page') || parseUrl(model.get('location')).path;\n      model.set(dimensions.PAGE_PATH, path),\n\n      model.set(dimensions.HIT_TYPE, model.get('hitType'), true);\n      model.set(dimensions.HIT_TIME, String(+new Date), true);\n      model.set(dimensions.HIT_ID, uuid(), true);\n      model.set(dimensions.VISIBILITY_STATE, document.visibilityState, true);\n      originalBuildHitTask(model);\n    });\n  });\n}\n\n\n/**\n * Requires select autotrack plugins for each tracker.\n */\nfunction requireAutotrackPlugins() {\n  gaAll('require', 'cleanUrlTracker', {\n    stripQuery: true,\n    queryDimensionIndex: getDefinitionIndex(dimensions.URL_QUERY_PARAMS),\n    indexFilename: 'index.html',\n    trailingSlash: 'add',\n  });\n  gaAll('require', 'eventTracker');\n  gaAll('require', 'mediaQueryTracker', {\n    definitions: [\n      {\n        name: 'Breakpoint',\n        dimensionIndex: 1,\n        items: [\n          {name: 'xs', media: 'all'},\n          {name: 'sm', media: '(min-width: 384px)'},\n          {name: 'md', media: '(min-width: 576px)'},\n          {name: 'lg', media: '(min-width: 768px)'}\n        ]\n      },\n      {\n        name: 'Resolution',\n        dimensionIndex: 2,\n        items: [\n          {name: '1x',   media: 'all'},\n          {name: '1.5x', media: '(-webkit-min-device-pixel-ratio: 1.5), ' +\n                                '(min-resolution: 144dpi)'},\n          {name: '2x',   media: '(-webkit-min-device-pixel-ratio: 2), ' +\n                                '(min-resolution: 192dpi)'},\n        ]\n      },\n      {\n        name: 'Orientation',\n        dimensionIndex: 3,\n        items: [\n          {name: 'landscape', media: '(orientation: landscape)'},\n          {name: 'portrait',  media: '(orientation: portrait)'}\n        ]\n      }\n    ]\n  });\n  gaAll('require', 'outboundLinkTracker');\n  gaTest('require', 'pageVisibilityTracker', {\n    visibleMetricIndex: getDefinitionIndex(metrics.PAGE_VISIBLE),\n    hiddenMetricIndex: getDefinitionIndex(metrics.PAGE_HIDDEN),\n    heartbeatTimeout: 1,\n    sessionTimeout: 30,\n    timeZone: 'America/Los_Angeles',\n    fieldsObj: {[dimensions.HIT_SOURCE]: 'pageVisibilityTracker'},\n    hitFilter: (model) => {\n      model.set(dimensions.METRIC_VALUE, String(model.get('eventValue')), true);\n    },\n  });\n  gaAll('require', 'socialWidgetTracker');\n}\n\n\n/**\n * Sends the initial pageview.\n */\nfunction sendInitialPageview() {\n  gaAll('send', 'pageview', {[dimensions.HIT_SOURCE]: 'pageload'});\n}\n\n\n/**\n * Creates a ga() proxy function that calls commands on all but the\n * excluded trackers.\n * @param {Array} trackers an array or objects containing the `name` and\n *     `trackingId` fields.\n * @return {Function} The proxied ga() function.\n */\nfunction createGaProxy(trackers) {\n  return (command, ...args) => {\n    for (let {name} of trackers) {\n      if (typeof command == 'function') {\n        window.ga(() => {\n          command(window.ga.getByName(name));\n        });\n      } else {\n        window.ga(`${name}.${command}`, ...args);\n      }\n    }\n  };\n}\n\n\n/**\n * Accepts a custom dimension or metric and returns it's numerical index.\n * @param {string} definition The definition string (e.g. 'dimension1').\n * @return {number} The definition index.\n */\nfunction getDefinitionIndex(definition) {\n  return +/\\d+$/.exec(definition)[0];\n}\n\n\n/**\n * Randomizes array element order in-place using Durstenfeld shuffle algorithm.\n * http://goo.gl/91pjZs\n * @param {Array} array The input array.\n * @return {Array} The randomized array.\n */\nfunction shuffleArray(array) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    const temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n  return array;\n}\n\n\n/*eslint-disable */\n// https://gist.github.com/jed/982883\nconst uuid = function b(a){return a?(a^Math.random()*16>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,b)};\n/*eslint-enable */\n","let supports = {};\nlet style = document.body.style;\n\nexport default {\n  flexbox: function() {\n    return supports.flexbox || (supports.flexbox = ('flexBasis' in style ||\n        'msFlexAlign' in style || 'webkitBoxDirection' in style));\n  }\n};\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nmodule.exports = {\n  VERSION: '1.1.0',\n  DEV_ID: 'i5iSjo',\n\n  VERSION_PARAM: '_av',\n  USAGE_PARAM: '_au',\n\n  NULL_DIMENSION: '(not set)'\n};\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar assign = require('object-assign');\nvar parseUrl = require('dom-utils/lib/parse-url');\nvar constants = require('../constants');\nvar provide = require('../provide');\nvar usage = require('../usage');\n\n\n/**\n * Registers clean URL tracking on a tracker object. The clean URL tracker\n * removes query parameters from the page value reported to Google Analytics.\n * It also helps to prevent tracking similar URLs, e.g. sometimes ending a URL\n * with a slash and sometimes not.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction CleanUrlTracker(tracker, opts) {\n\n  usage.track(tracker, usage.plugins.CLEAN_URL_TRACKER);\n\n  this.opts = assign({\n    stripQuery: false,\n    queryDimensionIndex: null,\n    indexFilename: null,\n    trailingSlash: null\n  }, opts);\n\n  this.tracker = tracker;\n\n  this.overrideTrackerBuildHitTask();\n}\n\n\n/**\n * Cleans the URL based on the preferences set in the configuration options.\n * @param {Object} model An analytics.js Model object.\n */\nCleanUrlTracker.prototype.cleanUrlTask = function(model) {\n\n  var location = model.get('location');\n  var page = model.get('page');\n  var url = parseUrl(page || location);\n\n  var oldPath = url.pathname;\n  var newPath = oldPath;\n\n  // If an index filename was provided, remove it if it appears at the end\n  // of the URL.\n  if (this.opts.indexFilename) {\n    var parts = newPath.split('/');\n    if (this.opts.indexFilename == parts[parts.length - 1]) {\n      parts[parts.length - 1] = '';\n      newPath = parts.join('/');\n    }\n  }\n\n  // Ensure the URL ends with or doesn't end with slash based on the\n  // `trailingSlash` option. Note that filename URLs should never contain\n  // a trailing slash.\n  if (this.opts.trailingSlash == 'remove') {\n      newPath = newPath.replace(/\\/+$/, '');\n  }\n  else if (this.opts.trailingSlash == 'add') {\n    var isFilename = /\\.\\w+$/.test(newPath);\n    if (!isFilename && newPath.substr(-1) != '/') {\n      newPath = newPath + '/';\n    }\n  }\n\n  // If a query dimensions index was provided, set the query string portion\n  // of the URL on that dimension. If no query string exists on the URL use\n  // the NULL_DIMENSION.\n  if (this.opts.stripQuery && this.opts.queryDimensionIndex) {\n    model.set('dimension' + this.opts.queryDimensionIndex,\n        url.query || constants.NULL_DIMENSION, true);\n  }\n\n  model.set('page', newPath + (!this.opts.stripQuery ? url.search : ''), true);\n};\n\n\n/**\n * Overrides the tracker's `buildHitTask` to check for proper URL formatting\n * on every hit (not just the initial pageview).\n */\nCleanUrlTracker.prototype.overrideTrackerBuildHitTask = function() {\n  this.originalTrackerBuildHitTask = this.tracker.get('buildHitTask');\n\n  this.tracker.set('buildHitTask', function(model) {\n    this.cleanUrlTask(model);\n    this.originalTrackerBuildHitTask(model);\n  }.bind(this));\n};\n\n\n/**\n * Restores all overridden tasks and methods.\n */\nCleanUrlTracker.prototype.remove = function() {\n  this.tracker.set('buildHitTask', this.originalTrackerBuildHitTask);\n};\n\n\nprovide('cleanUrlTracker', CleanUrlTracker);\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar assign = require('object-assign');\nvar delegate = require('dom-utils/lib/delegate');\nvar provide = require('../provide');\nvar usage = require('../usage');\nvar createFieldsObj = require('../utilities').createFieldsObj;\nvar getAttributeFields = require('../utilities').getAttributeFields;\n\n\n/**\n * Registers declarative event tracking.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction EventTracker(tracker, opts) {\n\n  usage.track(tracker, usage.plugins.EVENT_TRACKER);\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.addEventListener) return;\n\n  this.opts = assign({\n    events: ['click'],\n    fieldsObj: {},\n    attributePrefix: 'ga-',\n    hitFilter: null\n  }, opts);\n\n  this.tracker = tracker;\n\n  // Binds methods.\n  this.handleEvents = this.handleEvents.bind(this);\n\n  var selector = '[' + this.opts.attributePrefix + 'on]';\n\n  // Creates a mapping of events to their delegates\n  this.delegates = {};\n  this.opts.events.forEach(function(event) {\n    this.delegates[event] = delegate(document, event, selector,\n        this.handleEvents, {composed: true, useCapture: true});\n  }.bind(this));\n}\n\n\n/**\n * Handles all clicks on elements with event attributes.\n * @param {Event} event The DOM click event.\n * @param {Element} element The delegated DOM element target.\n */\nEventTracker.prototype.handleEvents = function(event, element) {\n\n  var prefix = this.opts.attributePrefix;\n\n  // Ensures the event type matches the one specified on the element.\n  if (event.type != element.getAttribute(prefix + 'on')) return;\n\n  var defaultFields = {transport: 'beacon'};\n  var attributeFields = getAttributeFields(element, prefix);\n  var userFields = assign({}, this.opts.fieldsObj, attributeFields);\n  var hitType = attributeFields.hitType || 'event';\n\n  this.tracker.send(hitType, createFieldsObj(\n      defaultFields, userFields, this.tracker, this.opts.hitFilter, element));\n};\n\n\n/**\n * Removes all event listeners and instance properties.\n */\nEventTracker.prototype.remove = function() {\n  Object.keys(this.delegates).forEach(function(key) {\n    this.delegates[key].destroy();\n  }.bind(this));\n};\n\n\nprovide('eventTracker', EventTracker);\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar assign = require('object-assign');\nvar debounce = require('debounce');\nvar constants = require('../constants');\nvar provide = require('../provide');\nvar usage = require('../usage');\nvar createFieldsObj = require('../utilities').createFieldsObj;\nvar isObject = require('../utilities').isObject;\nvar toArray = require('../utilities').toArray;\n\n\n/**\n * Declares the MediaQueryListener instance cache.\n */\nvar mediaMap = {};\n\n\n/**\n * Registers media query tracking.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction MediaQueryTracker(tracker, opts) {\n\n  usage.track(tracker, usage.plugins.MEDIA_QUERY_TRACKER);\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.matchMedia) return;\n\n  this.opts = assign({\n    definitions: null,\n    changeTemplate: this.changeTemplate,\n    changeTimeout: 1000,\n    fieldsObj: {},\n    hitFilter: null\n  }, opts);\n\n  // Exits early if media query data doesn't exist.\n  if (!isObject(this.opts.definitions)) return;\n\n  this.opts.definitions = toArray(this.opts.definitions);\n  this.tracker = tracker;\n  this.changeListeners = [];\n\n  this.processMediaQueries();\n}\n\n\n/**\n * Loops through each media query definition, sets the custom dimenion data,\n * and adds the change listeners.\n */\nMediaQueryTracker.prototype.processMediaQueries = function() {\n  this.opts.definitions.forEach(function(definition) {\n    // Only processes definitions with a name and index.\n    if (definition.name && definition.dimensionIndex) {\n      var mediaName = this.getMatchName(definition);\n      this.tracker.set('dimension' + definition.dimensionIndex, mediaName);\n\n      this.addChangeListeners(definition);\n    }\n  }.bind(this));\n};\n\n\n/**\n * Takes a definition object and return the name of the matching media item.\n * If no match is found, the NULL_DIMENSION value is returned.\n * @param {Object} definition A set of named media queries associated\n *     with a single custom dimension.\n * @return {string} The name of the matched media or NULL_DIMENSION.\n */\nMediaQueryTracker.prototype.getMatchName = function(definition) {\n  var match;\n\n  definition.items.forEach(function(item) {\n    if (getMediaListener(item.media).matches) {\n      match = item;\n    }\n  });\n  return match ? match.name : constants.NULL_DIMENSION;\n};\n\n\n/**\n * Adds change listeners to each media query in the definition list.\n * Debounces the changes to prevent unnecessary hits from being sent.\n * @param {Object} definition A set of named media queries associated\n *     with a single custom dimension\n */\nMediaQueryTracker.prototype.addChangeListeners = function(definition) {\n  definition.items.forEach(function(item) {\n    var mql = getMediaListener(item.media);\n    var fn = debounce(function() {\n      this.handleChanges(definition);\n    }.bind(this), this.opts.changeTimeout);\n\n    mql.addListener(fn);\n    this.changeListeners.push({mql: mql, fn: fn});\n  }.bind(this));\n};\n\n\n/**\n * Handles changes to the matched media. When the new value differs from\n * the old value, a change event is sent.\n * @param {Object} definition A set of named media queries associated\n *     with a single custom dimension\n */\nMediaQueryTracker.prototype.handleChanges = function(definition) {\n  var newValue = this.getMatchName(definition);\n  var oldValue = this.tracker.get('dimension' + definition.dimensionIndex);\n\n  if (newValue !== oldValue) {\n    this.tracker.set('dimension' + definition.dimensionIndex, newValue);\n\n    var defaultFields = {\n      eventCategory: definition.name,\n      eventAction: 'change',\n      eventLabel: this.opts.changeTemplate(oldValue, newValue),\n      nonInteraction: true,\n      transport: 'beacon'\n    };\n    this.tracker.send('event', createFieldsObj(\n        defaultFields, this.opts.fieldsObj, this.tracker, this.opts.hitFilter));\n  }\n};\n\n\n/**\n * Removes all event listeners and instance properties.\n */\nMediaQueryTracker.prototype.remove = function() {\n  for (var i = 0, listener; listener = this.changeListeners[i]; i++) {\n    listener.mql.removeListener(listener.fn);\n  }\n};\n\n\n/**\n * Sets the default formatting of the change event label.\n * This can be overridden by setting the `changeTemplate` option.\n * @param {string} oldValue The value of the media query prior to the change.\n * @param {string} newValue The value of the media query after the change.\n * @return {string} The formatted event label.\n */\nMediaQueryTracker.prototype.changeTemplate = function(oldValue, newValue) {\n  return oldValue + ' => ' + newValue;\n};\n\n\n/**\n * Accepts a media query and returns a MediaQueryListener object.\n * Caches the values to avoid multiple unnecessary instances.\n * @param {string} media A media query value.\n * @return {MediaQueryListener} The matched media.\n */\nfunction getMediaListener(media) {\n  // Returns early if the media is cached.\n  if (mediaMap[media]) return mediaMap[media];\n\n  mediaMap[media] = window.matchMedia(media);\n  return mediaMap[media];\n}\n\n\nprovide('mediaQueryTracker', MediaQueryTracker);\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar assign = require('object-assign');\nvar delegate = require('dom-utils/lib/delegate');\nvar parseUrl = require('dom-utils/lib/parse-url');\nvar provide = require('../provide');\nvar usage = require('../usage');\nvar createFieldsObj = require('../utilities').createFieldsObj;\nvar getAttributeFields = require('../utilities').getAttributeFields;\nvar withTimeout = require('../utilities').withTimeout;\n\n\n/**\n * Registers outbound link tracking on a tracker object.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction OutboundLinkTracker(tracker, opts) {\n\n  usage.track(tracker, usage.plugins.OUTBOUND_LINK_TRACKER);\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.addEventListener) return;\n\n  this.opts = assign({\n    events: ['click'],\n    linkSelector: 'a, area',\n    shouldTrackOutboundLink: this.shouldTrackOutboundLink,\n    fieldsObj: {},\n    attributePrefix: 'ga-',\n    hitFilter: null\n  }, opts);\n\n  this.tracker = tracker;\n\n  // Binds methods.\n  this.handleLinkInteractions = this.handleLinkInteractions.bind(this);\n\n  // Creates a mapping of events to their delegates\n  this.delegates = {};\n  this.opts.events.forEach(function(event) {\n    this.delegates[event] = delegate(document, event, this.opts.linkSelector,\n        this.handleLinkInteractions, {composed: true, useCapture: true});\n  }.bind(this));\n}\n\n\n/**\n * Handles all interactions on link elements. A link is considered an outbound\n * link if its hostname property does not match location.hostname. When the\n * beacon transport method is not available, the links target is set to\n * \"_blank\" to ensure the hit can be sent.\n * @param {Event} event The DOM click event.\n * @param {Element} link The delegated event target.\n */\nOutboundLinkTracker.prototype.handleLinkInteractions = function(event, link) {\n  if (this.opts.shouldTrackOutboundLink(link, parseUrl)) {\n    var href = link.getAttribute('href') || link.getAttribute('xlink:href');\n    var url = parseUrl(href);\n\n    var defaultFields = {\n      transport: 'beacon',\n      eventCategory: 'Outbound Link',\n      eventAction: event.type,\n      eventLabel: url.href\n    };\n\n    if (!navigator.sendBeacon &&\n        linkClickWillUnloadCurrentPage(event, link)) {\n      // Adds a new event handler at the last minute to minimize the chances\n      // that another event handler for this click will run after this logic.\n      window.addEventListener('click', function(event) {\n        // Checks to make sure another event handler hasn't already prevented\n        // the default action. If it has the custom redirect isn't needed.\n        if (!event.defaultPrevented) {\n          // Stops the click and waits until the hit is complete (with timeout)\n          // for browsers that don't support beacon.\n          event.preventDefault();\n          defaultFields.hitCallback = withTimeout(function() {\n            location.href = href;\n          });\n        }\n      });\n    }\n\n    var userFields = assign({}, this.opts.fieldsObj,\n        getAttributeFields(link, this.opts.attributePrefix));\n\n    this.tracker.send('event', createFieldsObj(\n        defaultFields, userFields, this.tracker, this.opts.hitFilter, link));\n  }\n};\n\n\n/**\n * Determines whether or not the tracker should send a hit when a link is\n * clicked. By default links with a hostname property not equal to the current\n * hostname are tracked.\n * @param {Element} link The link that was clicked on.\n * @param {Function} parseUrl A cross-browser utility method for url parsing.\n * @return {boolean} Whether or not the link should be tracked.\n */\nOutboundLinkTracker.prototype.shouldTrackOutboundLink =\n    function(link, parseUrl) {\n\n  var href = link.getAttribute('href') || link.getAttribute('xlink:href');\n  var url = parseUrl(href);\n  return url.hostname != location.hostname &&\n      url.protocol.slice(0, 4) == 'http';\n};\n\n\n/**\n * Removes all event listeners and instance properties.\n */\nOutboundLinkTracker.prototype.remove = function() {\n  Object.keys(this.delegates).forEach(function(key) {\n    this.delegates[key].destroy();\n  }.bind(this));\n};\n\n\n/**\n * Determines if a link click event will cause the current page to upload.\n * Note: most link clicks *will* cause the current page to unload because they\n * initiate a page navigation. The most common reason a link click won't cause\n * the page to unload is if the clicked was to open the link in a new tab.\n * @param {Event} event The DOM event.\n * @param {Element} link The link element clicked on.\n * @return {boolean} True if the current page will be unloaded.\n */\nfunction linkClickWillUnloadCurrentPage(event, link) {\n  return !(\n      // The event type can be customized; we only care about clicks here.\n      event.type != 'click' ||\n      // Links with target=\"_blank\" set will open in a new window/tab.\n      link.target == '_blank' ||\n      // On mac, command clicking will open a link in a new tab. Control\n      // clicking does this on windows.\n      event.metaKey || event.ctrlKey ||\n      // Shift clicking in Chrome/Firefox opens the link in a new window\n      // In Safari it adds the URL to a favorites list.\n      event.shiftKey ||\n      // On Mac, clicking with the option key is used to download a resouce.\n      event.altKey ||\n      // Middle mouse button clicks (which == 2) are used to open a link\n      // in a new tab, and right clicks (which == 3) on Firefox trigger\n      // a click event.\n      event.which > 1);\n}\n\n\nprovide('outboundLinkTracker', OutboundLinkTracker);\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar parseUrl = require('dom-utils/lib/parse-url');\nvar assign = require('object-assign');\nvar constants = require('../constants');\nvar provide = require('../provide');\nvar Session = require('../session');\nvar Store = require('../storage');\nvar usage = require('../usage');\nvar createFieldsObj = require('../utilities').createFieldsObj;\nvar now = require('../utilities').now;\nvar uuid = require('../utilities').uuid;\n\n\nvar HIDDEN = 'hidden';\nvar VISIBLE = 'visible';\nvar PAGE_ID = uuid();\nvar SECONDS = 1000;\nvar MINUTES = 60 * SECONDS;\n\n\n/**\n * Registers outbound link tracking on tracker object.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction PageVisibilityTracker(tracker, opts) {\n  usage.track(tracker, usage.plugins.PAGE_VISIBILITY_TRACKER);\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.addEventListener) return;\n\n  this.opts = assign({\n    sessionTimeout: Session.DEFAULT_TIMEOUT,\n    timeZone: null,\n    hiddenMetricIndex: null,\n    visibleMetricIndex: null,\n    heartbeatTimeout: null,\n    changeTemplate: this.changeTemplate,\n    fieldsObj: {},\n    hitFilter: null\n  }, opts);\n\n  var trackingId = tracker.get('trackingId');\n  this.tracker = tracker;\n\n  // Tracks the initial pageview to ensure Page Visibility events aren't\n  // sent prior to the initial pageview being sent.\n  this.isInitialPageviewSent = false;\n  this.isInitialVisibilityChangeSent = false;\n\n  // Binds methods to `this`.\n  this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n  this.handleWindowUnload = this.handleWindowUnload.bind(this);\n  this.handleStorageChange = this.handleStorageChange.bind(this);\n  this.newSessionDidStart = this.newSessionDidStart.bind(this);\n  this.initialScreenOrPageviewDidSend =\n      this.initialScreenOrPageviewDidSend.bind(this);\n\n  // Creates the store and binds storage change events.\n  this.store = new Store(trackingId, 'plugins/page-visibility-tracker');\n  this.store.storageDidChangeInAnotherWindow = this.handleStorageChange;\n\n  // Creates the session and binds session events.\n  this.session = new Session(tracker, opts.sessionTimeout, opts.timeZone);\n  this.session.newSessionDidStart = this.newSessionDidStart;\n  this.session.initialScreenOrPageviewDidSend =\n      this.initialScreenOrPageviewDidSend;\n}\n\n\n/**\n * Handles adding visibility event listeners and trigger the initial\n * visibility change event. This function is invoked as soon as the session\n * manager detects that the initial pageview or screenview has been sent.\n */\nPageVisibilityTracker.prototype.initialScreenOrPageviewDidSend = function() {\n  document.addEventListener('visibilitychange', this.handleVisibilityChange);\n  window.addEventListener('unload', this.handleWindowUnload);\n  this.handleVisibilityChange();\n};\n\n\n/**\n * Updates the store and schedules a new heartbeat anytime a new sessions\n * start is detected in the current tab.\n */\nPageVisibilityTracker.prototype.newSessionDidStart = function() {\n  // Updates the previously stored page and change time to avoid reporting\n  // deltas with events in a prior session.\n  this.store.set({\n    time: now(),\n    page: this.getPage(),\n    pageId: PAGE_ID,\n    // Do not update state, it should only be updated in the change handler.\n  });\n\n  this.scheduleNextHeartbeat();\n};\n\n\n/**\n * Handles responding to `visiblitychange` events.\n * This method sends events when the visibility state changes during active\n * session (active meaning the session has not expired). If the session has\n * expired, a change to `visible` will trigger an additional pageview.\n * This method also sends as the event value (and optionally custom metrics)\n * the elapsed time between this event and the previously reported one change\n * in the same session, allowing you to more accurately determine when users\n * were actually looking at your page versus when it was in the background.\n */\nPageVisibilityTracker.prototype.handleVisibilityChange = function() {\n  // Stores the visibility state on the instance so it can be referenced\n  // in the unload handler.\n  // TODO(philipwalton): consider storing this on the tracker as well.\n  var visibilityState = this.visibilityState = this.getVisibilityState();\n\n  // Ignore visibilityStates that aren't hidden or visible.\n  if (!(visibilityState == VISIBLE || visibilityState == HIDDEN)) return;\n\n  if (visibilityState == HIDDEN) {\n    // Transitions to hidden should stop any scheduled heartbeats.\n    clearTimeout(this.heartbeatTimeout);\n\n    // Hidden events should never be sent if a session has expired\n    // (if they are, they'll likely start a new session with just this event).\n    if (this.session.isExpired()) {\n      this.store.clear();\n      return;\n    }\n  }\n\n  if (visibilityState == VISIBLE) {\n    // If the session has expired, or if a new session has started in another\n    // tab, but the current tab hasn't sent any interaction hits in the new\n    // session, send a pageview prior to the visible event.\n    // This behavior ensures all new sessions start with a pageview so\n    // session-level page dimensions and metrics (e.g. ga:landingPagePath\n    // and ga:entrances) are correct.\n    if (this.session.isExpired() ||\n        this.session.isLastTrackerInteractionFromPreviousSession()) {\n      var defaultFields = {transport: 'beacon'};\n      this.tracker.send('pageview',\n          createFieldsObj(defaultFields, this.opts.fieldsObj,\n              this.tracker, this.opts.hitFilter));\n    }\n    this.scheduleNextHeartbeat();\n  }\n\n  this.sendPageVisibilityEvent('change', visibilityState);\n  this.store.set({\n    time: now(),\n    state: visibilityState,\n    page: this.getPage(),\n    pageId: PAGE_ID,\n  });\n};\n\n\n/**\n * Sends a Page Visibility event with the passed event action and visibility\n * state. If a previous state change exists within the same session, the time\n * delta is tracked as the event label and optionally as a custom metric.\n * @param {string} action The event action.\n * @param {string} visibilityState The pages current visibility state, which\n *     gets set as the event label.\n */\nPageVisibilityTracker.prototype.sendPageVisibilityEvent =\n    function(action, visibilityState) {\n  var lastVisibilityChange = this.store.get();\n\n  var timeSinceLastVisibilityChange =\n      this.getTimeSinceLastVisibilityChange(lastVisibilityChange.time);\n\n  var defaultFields = {\n    transport: 'beacon',\n    nonInteraction: true,\n    eventCategory: 'Page Visibility',\n    eventAction: action,\n    eventLabel: action == 'change' ?\n        this.formatChange(visibilityState, lastVisibilityChange) :\n        constants.NULL_DIMENSION,\n  };\n\n  // If at least a one second delta exists, report it.\n  if (timeSinceLastVisibilityChange) {\n    defaultFields.eventValue = timeSinceLastVisibilityChange;\n\n    // If a custom metric was specified for the current visibility state,\n    // give it the same value as the event value.\n    var metric = this.opts[lastVisibilityChange.state + 'MetricIndex'];\n    if (metric) {\n      defaultFields['metric' + metric] = timeSinceLastVisibilityChange;\n    }\n  }\n\n  // A previous page path is stored, set it as the page value.\n  if (lastVisibilityChange.page) {\n    defaultFields.page = lastVisibilityChange.page;\n  }\n\n  this.tracker.send('event',\n      createFieldsObj(defaultFields, this.opts.fieldsObj,\n          this.tracker, this.opts.hitFilter));\n\n  // Tracks whether a visibility change event has already been sent to avoid\n  // double sending for the initial pageload.\n  this.isInitialVisibilityChangeSent = true;\n};\n\n\n/**\n * Computes the visibility change from and to states and invokes the change\n * template.\n * @param {string} visibilityState The current visibility state.\n * @param {Object} lastVisibilityChange The last visiblity change data. If this\n *     does not include state data, the inverse of `visibilityState` is used.\n * @return {string} The result of the change template function.\n */\nPageVisibilityTracker.prototype.formatChange =\n    function(visibilityState, lastVisibilityChange) {\n  var lastVisibilityState = lastVisibilityChange.state ||\n      (visibilityState == HIDDEN ? VISIBLE : HIDDEN);\n  return this.opts.changeTemplate(lastVisibilityState, visibilityState);\n};\n\n\n/**\n * Calculates the time since the last visibility change event in the current\n * session. If the session has expired the reported time is zero.\n * @param {number} lastVisibilityChangeTime The timestamp of the last change\n *     event.\n * @return {number} The time (in ms) since the last change.\n */\nPageVisibilityTracker.prototype.getTimeSinceLastVisibilityChange =\n    function(lastVisibilityChangeTime) {\n  var isSessionActive = !this.session.isExpired();\n  var timeSinceChange = lastVisibilityChangeTime &&\n      Math.round((now() - lastVisibilityChangeTime) / SECONDS);\n\n  return isSessionActive && timeSinceChange > 0 ? timeSinceChange : 0;\n};\n\n\n/**\n * Handles responding to the `storage` event.\n * The code on this page needs to be informed when other tabs or windows are\n * updating the stored page visibility state data. This method checks to see\n * if a hidden state is stored when there are still visible tabs open, which\n * can happen if multiple windows are open at the same time.\n */\nPageVisibilityTracker.prototype.handleStorageChange = function() {\n  if (this.getVisibilityState() == VISIBLE) {\n    var lastVisibilityChange = this.store.get();\n\n    if (lastVisibilityChange.state == HIDDEN) {\n      // Writing to localStorage inside a storage event handler is dangerous as\n      // it can easily lead to an infinite loop. In this case the write only\n      // happens on pages whose visibility state is `visible` and for which\n      // another page updated the stored visibility state to `hidden`. When\n      // that happens all visible tabs will then invoke this update, but it\n      // won't be invoked a second time per page because after the first time\n      // the stored visibility state will be `visible`. The end result will\n      // be a single page ID stored in the visible state.\n      this.store.set({\n        state: VISIBLE,\n        page: this.getPage(),\n        pageId: PAGE_ID,\n      });\n      this.scheduleNextHeartbeat();\n    }\n  }\n};\n\n\n/**\n * Handles responding to the `unload` event.\n * Since some browsers don't emit a `visibilitychange` event in all cases where\n * a page might be unloaded, it's necessary to hook into the `unload` event to\n * ensure the correct state is always stored.\n */\nPageVisibilityTracker.prototype.handleWindowUnload = function() {\n  if (this.visibilityState != HIDDEN) {\n    this.handleVisibilityChange();\n  }\n};\n\n\n/**\n * Schedules a non-interaction hit to be sent every minute (by default) for\n * pages that are visible. This allows for significantly more accurate page\n * visibility metrics.\n */\nPageVisibilityTracker.prototype.scheduleNextHeartbeat = function() {\n  // Only schedule a heartbeat events if the option is explicitly set.\n  if (!this.opts.heartbeatTimeout) return;\n\n  clearTimeout(this.heartbeatTimeout);\n  this.heartbeatTimeout = setTimeout(function() {\n    // Heartbeat events should stop if the session has expired.\n    if (this.session.isExpired()) return;\n\n    var visibilityState = this.getVisibilityState();\n    var lastVisibilityChange = this.store.get();\n\n    if (visibilityState == VISIBLE &&\n        lastVisibilityChange.state == VISIBLE &&\n        lastVisibilityChange.pageId == PAGE_ID) {\n\n      this.sendPageVisibilityEvent('heartbeat', constants.NULL_DIMENSION);\n      this.scheduleNextHeartbeat();\n\n      this.store.set({time: now()});\n    }\n  }.bind(this), this.opts.heartbeatTimeout * MINUTES);\n};\n\n\n/**\n * Sets the default formatting of the change event label.\n * This can be overridden by setting the `changeTemplate` option.\n * @param {string} oldValue The value of the media query prior to the change.\n * @param {string} newValue The value of the media query after the change.\n * @return {string} The formatted event label.\n */\nPageVisibilityTracker.prototype.changeTemplate = function(oldValue, newValue) {\n  return oldValue + ' => ' + newValue;\n};\n\n\n/**\n * Gets the current page field from the tracker or infers it from the\n * location field.\n * @return {string} The real or inferred page field.\n */\nPageVisibilityTracker.prototype.getPage = function() {\n  var page = this.tracker.get('page');\n  if (page) {\n    return page;\n  } else {\n    var locationUrl = parseUrl(this.tracker.get('location'));\n    return locationUrl.path + locationUrl.hash;\n  }\n};\n\n\n/**\n * Returns the visibility state of the document. The primary purpose of this\n * method is for testing since `document.visibilityState` can't be altered.\n * @return {string} The visibility state.\n */\nPageVisibilityTracker.prototype.getVisibilityState = function() {\n  return document.visibilityState;\n};\n\n\n/**\n * Removes all event listeners and instance properties.\n */\n PageVisibilityTracker.prototype.remove = function() {\n  clearTimeout(this.heartbeatTimeout);\n  this.tracker.send = this.oldTrackerSendMethod;\n  this.session.restore();\n\n  document.removeEventListener('visibilitychange', this.handleVisibilityChange);\n  window.removeEventListener('storage', this.handleStorageChange);\n  window.removeEventListener('unload', this.handleWindowUnload);\n};\n\n\nprovide('pageVisibilityTracker', PageVisibilityTracker);\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/* global FB, twttr */\n\n\nvar assign = require('object-assign');\nvar provide = require('../provide');\nvar usage = require('../usage');\nvar createFieldsObj = require('../utilities').createFieldsObj;\n\n\n/**\n * Registers social tracking on tracker object.\n * Supports both declarative social tracking via HTML attributes as well as\n * tracking for social events when using official Twitter or Facebook widgets.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction SocialWidgetTracker(tracker, opts) {\n\n  usage.track(tracker, usage.plugins.SOCIAL_WIDGET_TRACKER);\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.addEventListener) return;\n\n  this.opts = assign({\n    fieldsObj: {},\n    hitFilter: null\n  }, opts);\n\n  this.tracker = tracker;\n\n  // Binds methods to `this`.\n  this.addWidgetListeners = this.addWidgetListeners.bind(this);\n  this.addTwitterEventHandlers = this.addTwitterEventHandlers.bind(this);\n  this.handleTweetEvents = this.handleTweetEvents.bind(this);\n  this.handleFollowEvents = this.handleFollowEvents.bind(this);\n  this.handleLikeEvents = this.handleLikeEvents.bind(this);\n  this.handleUnlikeEvents = this.handleUnlikeEvents.bind(this);\n\n  if (document.readyState != 'complete') {\n    // Adds the widget listeners after the window's `load` event fires.\n    // If loading widgets using the officially recommended snippets, they\n    // will be available at `window.load`. If not users can call the\n    // `addWidgetListeners` method manually.\n    window.addEventListener('load', this.addWidgetListeners);\n  }\n  else {\n    this.addWidgetListeners();\n  }\n}\n\n\n/**\n * Invokes the methods to add Facebook and Twitter widget event listeners.\n * Ensures the respective global namespaces are present before adding.\n */\nSocialWidgetTracker.prototype.addWidgetListeners = function() {\n  if (window.FB) this.addFacebookEventHandlers();\n  if (window.twttr) this.addTwitterEventHandlers();\n};\n\n\n/**\n * Adds event handlers for the \"tweet\" and \"follow\" events emitted by the\n * official tweet and follow buttons. Note: this does not capture tweet or\n * follow events emitted by other Twitter widgets (tweet, timeline, etc.).\n */\nSocialWidgetTracker.prototype.addTwitterEventHandlers = function() {\n  try {\n    twttr.ready(function() {\n      twttr.events.bind('tweet', this.handleTweetEvents);\n      twttr.events.bind('follow', this.handleFollowEvents);\n    }.bind(this));\n  } catch(err) {}\n};\n\n\n/**\n * Removes event handlers for the \"tweet\" and \"follow\" events emitted by the\n * official tweet and follow buttons.\n */\nSocialWidgetTracker.prototype.removeTwitterEventHandlers = function() {\n  try {\n    twttr.ready(function() {\n      twttr.events.unbind('tweet', this.handleTweetEvents);\n      twttr.events.unbind('follow', this.handleFollowEvents);\n    }.bind(this));\n  } catch(err) {}\n};\n\n\n/**\n * Adds event handlers for the \"like\" and \"unlike\" events emitted by the\n * official Facebook like button.\n */\nSocialWidgetTracker.prototype.addFacebookEventHandlers = function() {\n  try {\n    FB.Event.subscribe('edge.create', this.handleLikeEvents);\n    FB.Event.subscribe('edge.remove', this.handleUnlikeEvents);\n  } catch(err) {}\n};\n\n\n/**\n * Removes event handlers for the \"like\" and \"unlike\" events emitted by the\n * official Facebook like button.\n */\nSocialWidgetTracker.prototype.removeFacebookEventHandlers = function() {\n  try {\n    FB.Event.unsubscribe('edge.create', this.handleLikeEvents);\n    FB.Event.unsubscribe('edge.remove', this.handleUnlikeEvents);\n  } catch(err) {}\n};\n\n\n/**\n * Handles `tweet` events emitted by the Twitter JS SDK.\n * @param {Object} event The Twitter event object passed to the handler.\n */\nSocialWidgetTracker.prototype.handleTweetEvents = function(event) {\n  // Ignores tweets from widgets that aren't the tweet button.\n  if (event.region != 'tweet') return;\n\n  var url = event.data.url || event.target.getAttribute('data-url') ||\n      location.href;\n\n  var defaultFields = {\n    transport: 'beacon',\n    socialNetwork: 'Twitter',\n    socialAction: 'tweet',\n    socialTarget: url\n  };\n  this.tracker.send('social', createFieldsObj(defaultFields,\n      this.opts.fieldsObj, this.tracker, this.opts.hitFilter));\n};\n\n\n/**\n * Handles `follow` events emitted by the Twitter JS SDK.\n * @param {Object} event The Twitter event object passed to the handler.\n */\nSocialWidgetTracker.prototype.handleFollowEvents = function(event) {\n  // Ignore follows from widgets that aren't the follow button.\n  if (event.region != 'follow') return;\n\n  var screenName = event.data.screen_name ||\n      event.target.getAttribute('data-screen-name');\n\n  var defaultFields = {\n    transport: 'beacon',\n    socialNetwork: 'Twitter',\n    socialAction: 'follow',\n    socialTarget: screenName\n  };\n  this.tracker.send('social', createFieldsObj(defaultFields,\n      this.opts.fieldsObj, this.tracker, this.opts.hitFilter));\n};\n\n\n/**\n * Handles `like` events emitted by the Facebook JS SDK.\n * @param {string} url The URL corresponding to the like event.\n */\nSocialWidgetTracker.prototype.handleLikeEvents = function(url) {\n  var defaultFields = {\n    transport: 'beacon',\n    socialNetwork: 'Facebook',\n    socialAction: 'like',\n    socialTarget: url\n  };\n  this.tracker.send('social', createFieldsObj(defaultFields,\n      this.opts.fieldsObj, this.tracker, this.opts.hitFilter));\n};\n\n\n/**\n * Handles `unlike` events emitted by the Facebook JS SDK.\n * @param {string} url The URL corresponding to the unlike event.\n */\nSocialWidgetTracker.prototype.handleUnlikeEvents = function(url) {\n  var defaultFields = {\n    transport: 'beacon',\n    socialNetwork: 'Facebook',\n    socialAction: 'unlike',\n    socialTarget: url\n  };\n  this.tracker.send('social', createFieldsObj(defaultFields,\n      this.opts.fieldsObj, this.tracker, this.opts.hitFilter));\n};\n\n\n/**\n * Removes all event listeners and instance properties.\n */\nSocialWidgetTracker.prototype.remove = function() {\n  window.removeEventListener('load', this.addWidgetListeners);\n  this.removeFacebookEventHandlers();\n  this.removeTwitterEventHandlers();\n};\n\n\nprovide('socialWidgetTracker', SocialWidgetTracker);\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar constants = require('./constants');\nvar utilities = require('./utilities');\n\n\n// Adds the dev ID to the list of dev IDs if any plugin is used.\n(window.gaDevIds = window.gaDevIds || []).push(constants.DEV_ID);\n\n\n/**\n * Provides a plugin for use with analytics.js, accounting for the possibility\n * that the global command queue has been renamed or not yet defined.\n * @param {string} pluginName The plugin name identifier.\n * @param {Function} pluginConstructor The plugin constructor function.\n */\nmodule.exports = function providePlugin(pluginName, pluginConstructor) {\n  var gaAlias = window['GoogleAnalyticsObject'] || 'ga';\n  window[gaAlias] = window[gaAlias] || function() {\n    (window[gaAlias]['q'] = window[gaAlias]['q'] || []).push(arguments);\n  };\n\n  // Formally provides the plugin for use with analytics.js.\n  window[gaAlias]('provide', pluginName, pluginConstructor);\n\n  // Registers the plugin on the global gaplugins object.\n  window.gaplugins = window.gaplugins || {};\n  window.gaplugins[utilities.capitalize(pluginName)] = pluginConstructor;\n};\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar Store = require('./storage');\nvar now = require('./utilities').now;\n\n\nvar MINUTES = 60 * 1000;\n\n\nvar instances = {};\n\n\n/**\n * Creates a session management object that helps track session boundaries\n * across multple open tabs/windows.\n * @param {Object} tracker An analytics.js tracker object.\n * @param {number} timeout The session timeout (in minutes). This value should\n *     match what's set in the \"Session settings\" section of the Google\n *     Analytics admin.\n * @param {string=} timeZone The optional IANA time zone of the view. This\n *     value should match what's set in the \"View settings\" section of the\n *     Google Analytics admin. (Note: this assumes all views for the property\n *     use the same time zone. If that's not true, it's better not to use\n *     this feature).\n * @return {Session} The Session instance.\n */\nfunction Session(tracker, timeout, timeZone) {\n  // Don't create multiple instances for the same property.\n  var trackingId = tracker.get('trackingId');\n  if (instances[trackingId]) {\n    return instances[trackingId];\n  } else {\n    instances[trackingId] = this;\n  }\n\n  this.tracker = tracker;\n  this.timeout = timeout || Session.DEFAULT_TIMEOUT;\n  this.timeZone = timeZone;\n\n  this.isInitialScreenOrPageviewSent_ = false;\n  this.isTrackerActiveInSession_ = false;\n  this.sessionCount_ = 0;\n\n  // Binds methods.\n  this.sendHitTask = this.sendHitTask.bind(this);\n  this.handleStorage = this.handleStorage.bind(this);\n\n  // Overrides the trackers sendHitTask.\n  this.oldSendHitTask = this.tracker.get('sendHitTask');\n  this.tracker.set('sendHitTask', this.sendHitTask);\n\n  // Creates the session store and adds change listeners.\n  this.store = new Store(trackingId, 'session', {hitTime: 0, sessionCount: 0});\n  this.store.storageDidChangeInAnotherWindow = this.handleStorage;\n}\n\n\n/**\n * Accepts a tracker object and returns whether or not the session for that\n * tracker has expired. A session can expire for two reasons:\n *   - More than 30 minutes has elapsed since the previous interaction hit\n *     was sent (The 30 minutes number is the Google Analytics default, but\n *     it can be modified in GA admin \"Session settings\").\n *   - A new day has started since the previous interaction hit, in the\n *     specified time zone (should correspond to the time zone of the\n *     property's views).\n *\n * Note: since real session boundaries are determined at processing time,\n * this is just a best guess rather than a source of truth.\n *\n * @param {Object=} sessionData An optional sessionData object which avoids\n *     an additional localStorage read if the data is known to be fresh.\n * @return {boolean} True of the session has expired.\n */\nSession.prototype.isExpired = function(sessionData) {\n  if (!sessionData) {\n    sessionData = this.store.get();\n  }\n\n  var currentData = new Date();\n  var oldHitTime = sessionData.hitTime;\n  var oldHitDate = oldHitTime && new Date(oldHitTime);\n\n  if (oldHitTime) {\n    if (currentData - oldHitDate > (this.timeout * MINUTES)) {\n      // If more time has elapsed than the session expiry time,\n      // the session has expired.\n      return true;\n    } else if (this.timeZone &&\n        getDateInTimezone(currentData, this.timeZone) !=\n        getDateInTimezone(oldHitDate, this.timeZone)) {\n      // A new day has started since the previous hit, which means the\n      // session has expired.\n      return true;\n    }\n  }\n\n  // For all other cases return false.\n  return false;\n};\n\n\n/**\n * Returns true if the tracker has a record of an interaction hit occuring\n * as well as a record of it being from a previous session. If any of that\n * information is missing, err on the side of caution.\n * Note: this is different from the `isExpired` method in that it only refers\n * to the current tracker. It's possible another tab is open and sending hits\n * (meaning the session is not expired), but this tracker has not sent a hit\n * this session.\n * @return {boolean} True if enough evidence exists to be fairly certain.\n */\nSession.prototype.isLastTrackerInteractionFromPreviousSession = function() {\n  var globalSessionCount = this.store.get().sessionCount;\n  var trackerSessionCount = this.sessionCount_;\n  var hasBeenActiveEver = this.hasSentInteractionHit;\n\n  return hasBeenActiveEver && globalSessionCount > trackerSessionCount;\n};\n\n\n/**\n * Keeps track of when the previous interaction hits were sent as well as\n * when the initial pageview or screenview is sent. The last interaction hit\n * time is used to determine if the session has expired.\n * @param {Object} model The analytics.js model object.\n */\nSession.prototype.sendHitTask = function(model) {\n  var hitType = model.get('hitType');\n  var isInteractionHit = !(\n      model.get('nonInteraction') ||\n      hitType == 'timing' ||\n      hitType == 'data');\n\n  // Try sending the hit and, if it throws, exit early. Note, once the\n  //  original sendHitTask is run, you should not access the `model` object.\n  try {\n    this.oldSendHitTask.call(null, model);\n  } catch(err) {\n    return;\n  }\n\n  var sessionData = this.store.get();\n  if (isInteractionHit) {\n    var isSessionExpired = this.isExpired(sessionData);\n\n    // Update the stored session data.\n    sessionData.hitTime = now();\n    if (isSessionExpired) sessionData.sessionCount++;\n    this.store.set(sessionData);\n\n    // TODO(philipwalton): Update the session count on the tracker as well.\n    // to determine if the correct tracker is active in the current session.\n    this.sessionCount_ = sessionData.sessionCount;\n    this.hasSentInteractionHit = true;\n\n    // Interaction hits are always active in the current session.\n    this.isTrackerActiveInSession_ = true;\n\n    // Trigger callbacks if the session has expired. This should be done\n    // after the new data in stored in case it needs to be read.\n    if (isSessionExpired) this.newSessionDidStart();\n  }\n\n  if ((hitType == 'pageview' || hitType == 'screenview') &&\n      !this.isInitialScreenOrPageviewSent_) {\n    this.isInitialScreenOrPageviewSent_ = true;\n    this.initialScreenOrPageviewDidSend();\n  }\n};\n\n\n/**\n * Handles changes to the localStorage key from other tabs.\n * If the change incremented the session count, it invokes the\n * `newSessionDidStartInAnotherWindow()` method.\n * @param {Object} newData The data after the write.\n * @param {Object} oldData The data before the write.\n */\nSession.prototype.handleStorage = function(newData, oldData) {\n  if (newData.sessionCount > oldData.sessionCount) {\n    this.newSessionDidStartInAnotherWindow();\n  }\n};\n\n\n/**\n * Restores the tracker's original `sendHitTask` to the state before\n * session control was initialized and removes this instance from the global\n * store.\n * @param {Object} tracker The analytics.js tracker object.\n */\nSession.prototype.destroy = function() {\n  if (this.oldSendHitTask) {\n    this.tracker.set('sendHitTask', this.oldSendHitTask);\n    this.oldSendHitTask = null;\n  }\n  this.store.destroy();\n  delete instances[this.tracker.get('trackingId')];\n};\n\n\n/**\n * Placeholder to be set on the instance itself.\n */\nSession.prototype.initialScreenOrPageviewDidSend = function() {\n  // TODO(philipwalton): consider allowing multiple callbacks here.\n  // As it stands, if another plugin creates an instance for the same\n  // tracker, these methods will be overridden.\n};\n\n\n/**\n * Placeholder to be set on the instance itself.\n */\nSession.prototype.newSessionDidStart = function() {\n  // TODO(philipwalton): consider allowing multiple callbacks here.\n  // As it stands, if another plugin creates an instance for the same\n  // tracker, these methods will be overridden.\n};\n\n\n/**\n * Placeholder to be set on the instance itself.\n */\nSession.prototype.newSessionDidStartInAnotherWindow = function() {\n  // TODO(philipwalton): consider allowing multiple callbacks here.\n  // As it stands, if another plugin creates an instance for the same\n  // tracker, these methods will be overridden.\n};\n\n\nSession.DEFAULT_TIMEOUT = 30; // Minutes.\n\n\nmodule.exports = Session;\n\n\n/**\n * Accepts a date a returns a date string in the passed time zone.\n * Note: the format of the returned date string is not relevant because it is\n * never parsed, it's only compared to see if two dates are the same.\n * @param {Date} date The date object to convert.\n * @param {string} timeZone The IANA time zone, e.g. 'America/Los_Angeles'.\n * @return {string} The formatted date string in the passed time zone.\n */\nfunction getDateInTimezone(date, timeZone) {\n  // Not all browsers support all time zones, so catch possible errors and\n  // return false if the formatting fails.\n  try {\n    return new Intl.DateTimeFormat('en-US', {\n      timeZone: timeZone\n    }).format(date);\n  } catch(err) {\n    return false;\n  }\n}","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar assign = require('object-assign');\n\n\nvar AUTOTRACK_PREFIX = 'autotrack';\n\n\nvar stores = {};\nvar isListening = false;\n\n\n/**\n * Adds a single storage event listener and flips the global `isListening`\n * flag so multiple events aren't added.\n */\nfunction initStorageListener() {\n  window.addEventListener('storage', storageListener);\n  isListening = true;\n}\n\n\n/**\n * Removes the storage event listener and flips the global `isListening`\n * flag so it can be re-added later.\n */\nfunction removeStorageListener() {\n  window.removeEventListener('storage', storageListener);\n  isListening = false;\n}\n\n\n/**\n * The global storage event listener.\n * @param {StorageEvent} event The DOM event.\n */\nfunction storageListener(event) {\n  var store = stores[event.key];\n  if (store) {\n    var oldData = parse(event.oldValue, store.defaults);\n    var newData = parse(event.newValue, store.defaults);\n    store.storageDidChangeInAnotherWindow(newData, oldData);\n  }\n}\n\n\n/**\n * Parses a source string as JSON and merges the result with the passed\n * defaults object. If an error occurs while\n * @param {string} source A JSON string of data.\n * @param {Object} defaults An object of key/value defaults.\n * @return {Object} The parsed data object merged with the passed defaults.\n */\nfunction parse(source, defaults) {\n  var data;\n  try {\n    data = JSON.parse(source);\n  } catch(err) {\n    data = {};\n  }\n  return assign({}, defaults, data);\n}\n\n\n/**\n * A storage object to simplify interacting with localStorage.\n * @param {string} trackingId The tracking ID for the GA property.\n * @param {string} namespace A namespace unique to this store.\n * @param {Object=} defaults An optional object of key/value defaults.\n * @return {Store} The Store instance.\n */\nfunction Store(trackingId, namespace, defaults) {\n  var key = [AUTOTRACK_PREFIX, trackingId, namespace].join(':');\n\n  // Don't create multiple instances for the same property.\n  if (stores[key]) {\n    return stores[key];\n  } else {\n    stores[key] = this;\n    if (!isListening) initStorageListener();\n  }\n\n  this.key = key;\n  this.defaults = defaults || {};\n}\n\n\n/**\n * Gets the data stored in localStorage for this store.\n * @return {Object} The stored data merged with the defaults.\n */\nStore.prototype.get = function() {\n  // TODO(philipwalton): Implementation schema migrations if/when a new\n  // schema version is introduced.\n  return parse(\n      window.localStorage && window.localStorage.getItem(this.key),\n      this.defaults);\n};\n\n\n/**\n * Saves the passed data object to localStorage,\n * merging it with the existing data.\n * @param {Object} newData The data to save.\n */\nStore.prototype.set = function(newData) {\n  var oldData = this.get();\n  var mergedData = assign(oldData, newData);\n  window.localStorage &&\n      window.localStorage.setItem(this.key, JSON.stringify(mergedData));\n};\n\n\n/**\n * Clears the data in localStorage for the current store.\n */\nStore.prototype.clear = function() {\n  window.localStorage && window.localStorage.removeItem(this.key);\n};\n\n\n/**\n * Removes the store instance for the global stores map. If this is the last\n * store instance, the storage listener is also removed.\n * Note: this does not erase the stored data. Use `clear()` for that.\n */\nStore.prototype.destroy = function() {\n  delete stores[this.key];\n  if (!Object.keys(stores).length) {\n    removeStorageListener();\n  }\n};\n\n\n/**\n * A function to be invoked whenever the storage event fires for this\n * storage key.\n * The function is passed two objects: (newData, oldData).\n */\nStore.prototype.storageDidChangeInAnotherWindow = function() {\n  // Set on instance.\n  // TODO(philipwalton): consider allowing multiple callbacks here.\n  // As it stands, if another plugin creates an instance for the same\n  // tracker, these methods will be overridden.\n};\n\n\nmodule.exports = Store;\n\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar constants = require('./constants');\n\n\nvar plugins = {\n  CLEAN_URL_TRACKER: 1,\n  EVENT_TRACKER: 2,\n  IMPRESSION_TRACKER: 3,\n  MEDIA_QUERY_TRACKER: 4,\n  OUTBOUND_FORM_TRACKER: 5,\n  OUTBOUND_LINK_TRACKER: 6,\n  PAGE_VISIBILITY_TRACKER: 7,\n  SOCIAL_WIDGET_TRACKER: 8,\n  URL_CHANGE_TRACKER: 9\n};\nvar PLUGIN_COUNT = 9;\n\n\n/**\n * Converts a hexadecimal string to a binary string.\n * @param {string} hex A hexadecimal numeric string.\n * @return {string} a binary numeric string.\n */\nfunction convertHexToBin(hex) {\n  return parseInt(hex || '0', 16).toString(2);\n}\n\n\n/**\n * Converts a binary string to a hexadecimal string.\n * @param {string} bin A binary numeric string.\n * @return {string} a hexadecimal numeric string.\n */\nfunction convertBinToHex(bin) {\n  return parseInt(bin || '0', 2).toString(16);\n}\n\n\n/**\n * Adds leading zeros to a string if it's less than a minimum length.\n * @param {string} str A string to pad.\n * @param {number} len The minimum length of the string\n * @return {string} The padded string.\n */\nfunction padZeros(str, len) {\n  if (str.length < len) {\n    var toAdd = len - str.length;\n    while (toAdd) {\n      str = '0' + str;\n      toAdd--;\n    }\n  }\n  return str;\n}\n\n\n/**\n * Accepts a binary numeric string and flips the digit from 0 to 1 at the\n * specified index.\n * @param {string} str The binary numeric string.\n * @param {number} index The index to flip the bit.\n * @return {string} The new binary string with the bit flipped on\n */\nfunction flipBitOn(str, index) {\n  return str.substr(0, index) + 1 + str.substr(index + 1);\n}\n\n\n/**\n * Accepts a tracker and a plugin index and flips the bit at the specified\n * index on the tracker's usage parameter.\n * @param {Object} tracker An analytics.js tracker.\n * @param {number} pluginIndex The index of the plugin in the global list.\n */\nfunction trackPlugin(tracker, pluginIndex) {\n  var usageHex = tracker.get('&' + constants.USAGE_PARAM);\n  var usageBin = padZeros(convertHexToBin(usageHex), PLUGIN_COUNT);\n\n  // Flip the bit of the plugin being tracked.\n  usageBin = flipBitOn(usageBin, PLUGIN_COUNT - pluginIndex);\n\n  // Stores the modified usage string back on the tracker.\n  tracker.set('&' + constants.USAGE_PARAM, convertBinToHex(usageBin));\n}\n\n\n/**\n * Accepts a tracker and adds the current version to the version param.\n * @param {Object} tracker An analytics.js tracker.\n */\nfunction trackVersion(tracker) {\n  tracker.set('&' + constants.VERSION_PARAM, constants.VERSION);\n}\n\n\nmodule.exports = {\n  track: function(tracker, plugin) {\n    trackVersion(tracker);\n    trackPlugin(tracker, plugin);\n  },\n  plugins: plugins\n};\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvar assign = require('object-assign');\nvar getAttributes = require('dom-utils/lib/get-attributes');\n\n\nvar utilities = {\n  /**\n   * Accepts default and user override fields and an optional tracker, hit\n   * filter, and target element and returns a single object that can be used in\n   * `ga('send', ...)` commands.\n   * @param {Object} defaultFields The default fields to return.\n   * @param {Object} userFields Fields set by the user to override the defaults.\n   * @param {Object} opt_tracker The tracker object to apply the hit filter to.\n   * @param {Function} opt_hitFilter A filter function that gets\n   *     called with the tracker model right before the `buildHitTask`. It can\n   *     be used to modify the model for the current hit only.\n   * @param {Element} opt_target If the hit originated from an interaction\n   *     with a DOM element, hitFilter is invoked with that element as the\n   *     second argument.\n   * @return {Object} The final fields object.\n   */\n  createFieldsObj: function(\n      defaultFields, userFields, opt_tracker, opt_hitFilter, opt_target) {\n\n    if (typeof opt_hitFilter == 'function') {\n      var originalBuildHitTask = opt_tracker.get('buildHitTask');\n      return {\n        buildHitTask: function(model) {\n          model.set(defaultFields, null, true);\n          model.set(userFields, null, true);\n          opt_hitFilter(model, opt_target);\n          originalBuildHitTask(model);\n        }\n      };\n    }\n    else {\n      return assign({}, defaultFields, userFields);\n    }\n  },\n\n\n  /**\n   * Retrieves the attributes from an DOM element and returns a fields object\n   * for all attributes matching the passed prefix string.\n   * @param {Element} element The DOM element to get attributes from.\n   * @param {string} prefix An attribute prefix. Only the attributes matching\n   *     the prefix will be returned on the fields object.\n   * @return {Object} An object of analytics.js fields and values\n   */\n  getAttributeFields: function(element, prefix) {\n    var attributes = getAttributes(element);\n    var attributeFields = {};\n\n    Object.keys(attributes).forEach(function(attribute) {\n\n      // The `on` prefix is used for event handling but isn't a field.\n      if (attribute.indexOf(prefix) === 0 && attribute != prefix + 'on') {\n\n        var value = attributes[attribute];\n\n        // Detects Boolean value strings.\n        if (value == 'true') value = true;\n        if (value == 'false') value = false;\n\n        var field = utilities.camelCase(attribute.slice(prefix.length));\n        attributeFields[field] = value;\n      }\n    });\n\n    return attributeFields;\n  },\n\n\n  /**\n   * Accepts a function to be invoked one the DOM is ready. If the DOM is\n   * already ready, the callback is invoked immediately.\n   * @param {Function} callback The ready callback.\n   */\n  domReady: function(callback) {\n    if (document.readyState == 'loading') {\n      document.addEventListener('DOMContentLoaded', function fn() {\n        document.removeEventListener('DOMContentLoaded', fn);\n        callback();\n      });\n    } else {\n      callback();\n    }\n  },\n\n\n  /**\n   * Accepts a function and returns a wrapped version of the function that is\n   * expected to be called elsewhere in the system. If it's not called\n   * elsewhere after the timeout period, it's called regardless. The wrapper\n   * function also prevents the callback from being called more than once.\n   * @param {Function} callback The function to call.\n   * @param {number} wait How many milliseconds to wait before invoking\n   *     the callback.\n   * @returns {Function} The wrapped version of the passed function.\n   */\n  withTimeout: function(callback, wait) {\n    var called = false;\n    var fn = function() {\n      if (!called) {\n        called = true;\n        callback();\n      }\n    };\n    setTimeout(fn, wait || 2000);\n    return fn;\n  },\n\n\n  /**\n   * Accepts a string containing hyphen or underscore word separators and\n   * converts it to camelCase.\n   * @param {string} str The string to camelCase.\n   * @return {string} The camelCased version of the string.\n   */\n  camelCase: function(str) {\n    return str.replace(/[\\-\\_]+(\\w?)/g, function(match, p1) {\n      return p1.toUpperCase();\n    });\n  },\n\n\n  /**\n   * Capitalizes the first letter of a string.\n   * @param {string} str The input string.\n   * @return {string} The capitalized string\n   */\n  capitalize: function(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  },\n\n\n  /**\n   * Indicates whether the passed variable is a JavaScript object.\n   * @param {*} value The input variable to test.\n   * @return {boolean} Whether or not the test is an object.\n   */\n  isObject: function(value) {\n    return typeof value == 'object' && value !== null;\n  },\n\n\n  /**\n   * Indicates whether the passed variable is a JavaScript array.\n   * @param {*} value The input variable to test.\n   * @return {boolean} Whether or not the value is an array.\n   */\n  isArray: Array.isArray || function(value) {\n    return Object.prototype.toString.call(value) === '[object Array]';\n  },\n\n\n  /**\n   * Accepts a value that may or may not be an array. If it is not an array,\n   * it is returned as the first item in a single-item array.\n   * @param {*} value The value to convert to an array if it is not.\n   * @return {Array} The array-ified value.\n   */\n  toArray: function(value) {\n    return utilities.isArray(value) ? value : [value];\n  },\n\n\n  /**\n   * @return {number} The current date timestamp\n   */\n  now: function() {\n    return +new Date();\n  },\n\n\n  /*eslint-disable */\n  // https://gist.github.com/jed/982883\n  uuid: function b(a){return a?(a^Math.random()*16>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,b)},\n  /*eslint-enable */\n};\n\nmodule.exports = utilities;\n","'use strict';\n/* eslint-disable no-unused-vars */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (e) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (Object.getOwnPropertySymbols) {\n\t\t\tsymbols = Object.getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","\n/**\n * Module dependencies.\n */\n\nvar now = require('date-now');\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = now() - timestamp;\n\n    if (last < wait && last > 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      }\n    }\n  };\n\n  return function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n};\n","module.exports = Date.now || now\n\nfunction now() {\n    return new Date().getTime()\n}\n","var matches = require('./matches');\nvar parents = require('./parents');\n\n/**\n * Gets the closest parent element that matches the passed selector.\n * @param {Element} element The element whose parents to check.\n * @param {string} selector The CSS selector to match against.\n * @param {boolean} shouldCheckSelf True if the selector should test against\n *     the passed element itself.\n * @return {?Element} The matching element or undefined.\n */\nmodule.exports = function closest(element, selector, shouldCheckSelf) {\n  if (!(element && element.nodeType == 1 && selector)) return;\n\n  var parentElements =\n      (shouldCheckSelf ? [element] : []).concat(parents(element));\n\n  for (var i = 0, parent; parent = parentElements[i]; i++) {\n    if (matches(parent, selector)) return parent;\n  }\n};\n","var closest = require('./closest');\nvar matches = require('./matches');\n\n/**\n * Delegates the handling of events for an element matching a selector to an\n * ancestor of the matching element.\n * @param {Element} ancestor The ancestor element to add the listener to.\n * @param {string} eventType The event type to listen to.\n * @param {string} selector A CSS selector to match against child elements.\n * @param {Function} callback A function to run any time the event happens.\n * @param {Object} opts A configuration options object. The available options:\n *     - useCapture<boolean>: If true, bind to the event capture phase.\n *     - deep<boolean>: If true, delegate into shadow trees.\n * @return {Object} The delegate object. It contains a destroy method.\n */\n module.exports = function delegate(\n    ancestor, eventType, selector, callback, opts) {\n\n  opts = opts || {};\n\n  // Defines the event listener.\n  var listener = function(event) {\n\n    // If opts.composed is true and the event originated from inside a Shadow\n    // tree, check the composed path nodes.\n    if (opts.composed && typeof event.composedPath == 'function') {\n      var composedPath = event.composedPath();\n      for (var i = 0, node; node = composedPath[i]; i++) {\n        if (node.nodeType == 1 && matches(node, selector)) {\n          delegateTarget = node;\n        }\n      }\n    }\n    // Otherwise check the parents.\n    else {\n      var delegateTarget = closest(event.target, selector, true);\n    }\n\n    if (delegateTarget) {\n      callback.call(delegateTarget, event, delegateTarget);\n    }\n  };\n\n  ancestor.addEventListener(eventType, listener, opts.useCapture);\n\n  return {\n    destroy: function() {\n      ancestor.removeEventListener(eventType, listener, opts.useCapture);\n    }\n  };\n};\n","/**\n * Gets all attributes of an element as a plain JavaScriot object.\n * @param {Element} element The element whose attributes to get.\n * @return {Object} An object whose keys are the attribute keys and whose\n *     values are the attribute values. If no attributes exist, an empty\n *     object is returned.\n */\nmodule.exports = function getAttributes(element) {\n  var attrs = {};\n\n  // Validate input.\n  if (!(element && element.nodeType == 1)) return attrs;\n\n  // Return an empty object if there are no attributes.\n  var map = element.attributes;\n  if (map.length === 0) return {};\n\n  for (var i = 0, attr; attr = map[i]; i++) {\n    attrs[attr.name] = attr.value;\n  }\n  return attrs;\n};\n","var proto = window.Element.prototype;\nvar nativeMatches = proto.matches ||\n    proto.matchesSelector ||\n    proto.webkitMatchesSelector ||\n    proto.mozMatchesSelector ||\n    proto.msMatchesSelector ||\n    proto.oMatchesSelector;\n\n\n/**\n * Tests whether a DOM element matches a selector. This polyfills the native\n * Element.prototype.matches method across browsers.\n * @param {Element} element The DOM element to test.\n * @param {string} selector The CSS selector to test element against.\n * @return {boolean} True if the selector matches.\n */\n function matchesSelector(element, selector) {\n  if (typeof selector != 'string') return false;\n  if (nativeMatches) return nativeMatches.call(element, selector);\n  var nodes = element.parentNode.querySelectorAll(selector);\n  for (var i = 0, node; node = nodes[i]; i++) {\n    if (node == element) return true;\n  }\n  return false;\n}\n\n\n/**\n * Tests if a DOM elements matches any of the test DOM elements or selectors.\n * @param {Element} element The DOM element to test.\n * @param {Element|string|Array<Element|String>} test A DOM element, a CSS\n *     selector, or an array of DOM elements or CSS selectors to match against.\n * @return {boolean} True of any part of the test matches.\n */\nmodule.exports = function matches(element, test) {\n  // Validate input.\n  if (element && element.nodeType == 1 && test) {\n    // if test is a string or DOM element test it.\n    if (typeof test == 'string' || test.nodeType == 1) {\n      return element == test || matchesSelector(element, test);\n    }\n    // if it has a length property iterate over the items\n    // and return true if any match.\n    else if ('length' in test) {\n      for (var i = 0, item; item = test[i]; i++) {\n        if (element == item || matchesSelector(element, item)) return true;\n      }\n    }\n  }\n  // Still here? Return false\n  return false;\n};\n","/**\n * Returns an array of a DOM element's parent elements.\n * @param {Element} element The DOM element whose parents to get.\n * @return {Array} An array of all parent elemets, or an empty array if no\n *     parent elements are found.\n */\nmodule.exports = function parents(element) {\n  var list = [];\n  while (element && element.parentNode && element.parentNode.nodeType == 1) {\n    list.push(element = element.parentNode);\n  }\n  return list;\n};\n","var HTTP_PORT = '80';\nvar HTTPS_PORT = '443';\nvar DEFAULT_PORT = RegExp(':(' + HTTP_PORT + '|' + HTTPS_PORT + ')$');\n\n\nvar a = document.createElement('a');\nvar cache = {};\n\n\n/**\n * Parses the given url and returns an object mimicing a `Location` object.\n * @param {string} url The url to parse.\n * @return {Object} An object with the same properties as a `Location`\n *    plus the convience properties `path` and `query`.\n */\nmodule.exports = function parseUrl(url) {\n\n  // All falsy values (as well as \".\") should map to the current URL.\n  url = (!url || url == '.') ? location.href : url;\n\n  if (cache[url]) return cache[url];\n\n  a.href = url;\n\n  // When parsing file relative paths (e.g. `../index.html`), IE will correctly\n  // resolve the `href` property but will keep the `..` in the `path` property.\n  // It will also not include the `host` or `hostname` properties. Furthermore,\n  // IE will sometimes return no protocol or just a colon, especially for things\n  // like relative protocol URLs (e.g. \"//google.com\").\n  // To workaround all of these issues, we reparse with the full URL from the\n  // `href` property.\n  if (url.charAt(0) == '.' || url.charAt(0) == '/') return parseUrl(a.href);\n\n  // Don't include default ports.\n  var port = (a.port == HTTP_PORT || a.port == HTTPS_PORT) ? '' : a.port;\n\n  // PhantomJS sets the port to \"0\" when using the file: protocol.\n  port = port == '0' ? '' : port;\n\n  // Sometimes IE incorrectly includes a port for default ports\n  // (e.g. `:80` or `:443`) even when no port is specified in the URL.\n  // http://bit.ly/1rQNoMg\n  var host = a.host.replace(DEFAULT_PORT, '');\n\n  // Not all browser support `origin` so we have to build it.\n  var origin = a.origin ? a.origin : a.protocol + '//' + host;\n\n  // Sometimes IE doesn't include the leading slash for pathname.\n  // http://bit.ly/1rQNoMg\n  var pathname = a.pathname.charAt(0) == '/' ? a.pathname : '/' + a.pathname;\n\n  return cache[url] = {\n    hash: a.hash,\n    host: host,\n    hostname: a.hostname,\n    href: a.href,\n    origin: origin,\n    pathname: pathname,\n    port: port,\n    protocol: a.protocol,\n    search: a.search,\n\n    // Expose additional helpful properties not part of the Location object.\n    fragment: a.hash.slice(1), // The hash without the starting \"#\".\n    path: pathname + a.search, // The pathname and the search query (w/o hash).\n    query: a.search.slice(1) // The search without the starting \"?\".\n  };\n};\n"]}